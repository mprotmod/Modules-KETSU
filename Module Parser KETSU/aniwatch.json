{"moduleInfo":{"moduleName":"HiAnime","moduleInitials":"HA","moduleDesc":"Module for HiAnime (ex-zoro), subs are now supported on newer versions of Ketsu","developer":"ナビル","moduleID":"114653268923213246","moduleImage":"data:image/webp;base64,UklGRoIMAABXRUJQVlA4IHYMAABQMACdASpgAGAAAAAAJYwC77gv/AdNJsJDvST75+D/xk4zo7XV/94/LL/ZfOr02eYJ+kP9r/NLuC+YX9Rf93/dPdu/1H7M9gB/Uf6l6yfqo+gR+uXpoftr8Iv7G/tn7k/+G0YqSnw0/B/jp+1XrP5kfR3rD+2nKpiL9h/3D8h/2o/5H4G7G+AF+P/z7+v/j9+yP+A5FQAf51/UP7p+R35AfUTOAvM/7N+Qf9N6JWgB/K/7T/mfyN/xn1L/7H+4+4v3o/t/+X/6n5jfQN/Jv5l/hf7d+y3+D/8//L+9r2e/st7Fv7GH3/3mscmrXxOqMQSWMP4PfUZaT/yTU+oHq5T6QyFUtcWraGxzjaZxNH9ezERFWt9UALQZdVIMfUzvtoCWs+KDTC/kPnbkUutHbBaWE8OmBesSoUsv6sAA/lOO2RRoCiJZcLmPtB0tJhAxO63aoudO4vXieikwBTa1vROW5JfCU5esWF1abNts1Uu5mTqKrlKjACZhoY+wkQdBkmIbWt7318msmf6oAAD+//8NfPQS+fbIuNqnh7/iLHmxYAclBtzlewVTk1TrMfQdbGy3HfMPB7BsJuHv3xtFDFudjFHlVwTQJXTmP8bCrel9tJF/8V/XfPWDOsftg3QVR3GQGXrw8a5N2MVSOR/ZnzpMWA5w1TY1FpFs1nmJgPhKvZ2/bl7OdI2sC3A/MlzhO7aDPkiWzgKphI1FxOeSobI/AOV4kCuY/WSQbzzbI50cW3041ZSUMf2Zjs4yOTgBLs2CfrEe7N/6NS29zPlIR5hxbBn/Ym4uSPHG6VTWsMyWCaslXYzbAmgsPNYzJP4hop6GUi1Dqb8HtaKikOAsVLpfa1etyDy6bIejlznNd/E0y6KmaeJ58dO0oF4r9ICA8sJBE9VhNBXAOccqP/GesTmTbRT07skFq8RruI72c05IBgwXOSb1Ev4FumV/4rkc6eV7sd8gyfJQlgc+jmYi+ufQ0CZWRN8PJXy3u8ONxWDBXnQMXbva3cHFsiBFxuS1nRn/7Gs2RaRbVjA+RATao6jlxcaT0eLOvgP8hiYBrwbKsr9A4UerEQkZvYeO/qo3c4GxR59PmEycPQQt2J+n+CqvWly5tFj1St4b1EOn+ZsJ6bWv7AjlPK3AD5fYVTxbGoGYm0RgeYoy8zosz6Ar5T52uap0m0m4hhVI8e0fO722WHf6nzn0ejxOGtSfsv3V7l/zXwyARPNEXk3Jqt9gbZDuoivsYOOVy1yEm0/G81zi0RyACArh4v/u9i+skfPZ1xznWnwZ0VDA33K5sLe0VQkbb7GnDV9Xi5lqYiEJRj7BTBZPSvFBOybe7xWFR811go6kCPtkKDIB1D7pKYdZ3eILL3A2Zx0E9/P0WfE/spWdArT4HzKShYCjf6vYrPJQVeVcIg1oEYAqduDs6TUrjbzslVcgxveoeaXrGgAk8G1+qF6gH/MNiqqjxm0QHkmMGUzq6OXIvYIneA8qn+557fSVwEYHVfBn6GN7vcYNK1WoKMw7+rpfOIcfu3/xiEuZiOpuADkWq4U5A7S5KqIIYOUy5av2uTnW8ciLQWZZrj6qntCVZaIa/7+iEDJCJh02MST60DQoeVp+qw/wmx/JDGgZq6o79dUqNC4bgros7NsKHwgl4tBVKaDMeDs+wDcbyoWoLZhvg0o19iK4ITUvBWHOLwLn2aKQB9FoKcI6lB0ldUwLYN4oXWouaHDPlRIZYtALM+qkCtB5KtpasEp/FxQ6OC3DhRfSq5GROfZqDhhyf7tz+tJxgODC3KvccOp1UZEz6fKV9QmeACvZCjibnJqoi+V+oYqFgf0eKjI2odc6sJHunr3rshfcG8CrlYZA/rzK6KiWmsBTxP860fYJ2czu7vIMFxgg7b0fXrdPZXM8boAxEktBu5MeotaDQqqF+Tmb57BZ/VG7bAJ1N25Uw/zV/5S9SP/or7MEb3dwKiGeDTBa/Ut0tIBJkfha4Mm7hy9TnYXyGwv5Ym7MYNSc5wq4pZVxNB2S2hA9bWyPbmem3E/vt3hssQK7m+Alcrisrx+QCvIgCpB2U1XqmMr2qx2M3FzJCbjJIMPTt/z/tSfQZCDv/xcX/N4uSKOOc107uOuNoQqfoM0Q4iu1zu3cqt1485ny4feAT6x9RMZuYaF5IHZw2rC1hcpswhabUcc0IKeOtjg4uEpQ4NrsyDcXTzv/NjMGGKvGXHnEvq7ouvat5l4oE6RUTMR1EmtWBJV+Y+RlsThMKSD4kJSqOXGVxBSpQzHFoRbdpzjbik41+tZVsOrc11osPH8csEuwm0qF73qNNFYPXv7V2f3yOv/czfSlLHo8ToMSnMnLnAjdkSSxS0/G8+wgylC/UbZJiwqSIZqzBTilfvYksYvPP9cDHaJA3EsXYe7UhuWbSGjBFNf6Gr1zFnUjTwwSzBpOKjX97VkBfbYN3E6Ji8n2eV8hCee8yDJ+hjShMwCaFLxHqft+5N3w0QTsWXg0RWUdnCRoF0ImjjoU+ug8YuntWdUfc5w1jUH7/7Eh2V5rSUeYDjLXBwJPLoV5szuD5JCgwH8XiT/9MdeukMGSzx2QL66dDXUsOMIVbh4xMr1eNcj5SLagT0gdmQwko0tRVZQMSPSh6BNdzxLp6y8y1yAHaojE/F29rl9dPvuksd3ERzbUKi7yGd+9/cbtc2GwiA2NIYg/ZpdVWGihpnxYE4Z8VJ7KuB2BNtmdC4ikXDzVA/MfWYqmrmGdfY/KfsY6vfSZ+jdtZkFdwngn6QNmgOZh8D722FQrutosRIVR9JlW4F8JgiuAHbB5nKERnmIQAmc2g2PCJFij2H+lFio+eBWknfb3wCHfYKI0NfHVHiITVmUKvXscauSbFuXPXAKLF+OIN+hNI9R+gy2WrFnkIixOQI1vPZPQV1RR9TzUokx3Q4QTymTc/Bg8eZ8jnqJ2EsejG/zciqAj99ixKLBTL8w5Cy6//b/KJnJu+XYctZmJhCxqZ4UftO2HTTMQ+xdfc+2t1izAPU+xQTaL/F496mKmmmyrSPzlsjXhy4SM5BX5t3Z4zhkxtHPxMpVt+IknqkJfhOezPUuOIiLqs8J+cU3PUrVw/yhWb0E7PHrdI8f+muqSPeQlEOJFjfjlcaxJp7FkfFqOqmjvQBmJPVvN/zg2OaVEdKRprjGFBNpXMNlz8UDqzHO4B69VVmmJqaGNKA1rFMAXs9/sUXXWj0dZzXMnEfmEMwK/B7hjpcIaWfYiLyqQAyrsQt7l5amUk+V//3v94vkceRQyAgNUWCjc8YK/hlP/YYx0Linnw2xhzAzzJBDNgVu50zSx005FnrSDYt34aBtbxzQZvpkhnE9en//HWR0iFshK7w58HCcysVzz7fKC2iZoPG5iLcIe6uNJdplOgSCERfTCnnPcMuQiunE8179GHMUDHadp6mGdZuhC/iF+qUUpoygY8qf4QwO8zbo1gM1QStcSAZ9VsPHihbT3HvGf0jHsubPUh7s7j/OvrPKNdCbBAW4nTYrmQ9tcRholjiwPU+lgIf/QCU6kAdXdna0mLv/kmE8mH3KMPAc2PpxQdlHv99wdVC+AEkXSMSzfS3hbSDWppGhZn/4sq8spxOia3B+ANDEkahDC3MA3bW58FVrpt+psXA3JZ3Ni3dgEBd1Dh0WmDdyJRJw4DFkYEYTFKOPwjlBSmdy4f8X4pntc24cm4LbxUtEQIWa2zvUWs7DLQ5Fb+jvVDr7r2fHPIFwN0NgrJeTYGr4Cjp1q362WqfUpxqRGmkzN61CJpAtUY9hl0vMUSUwVFEJyi13nSTt0p/5giCsjlGO94KN5pfZvf106MlNU/x7Mj7895t8sENxfh/6oNSYYiFBNqxJXwCSwgHGu19eVgXd17SxrnAJLnNST/OvEFbYeM4WjTSaGJdPtJa2A4r029xpNl+vtSPicQ6eZAbTimFqpRLIsEfMvjcf+qjruIi+df8ARgqQOmMyg9KW3/8CwsrLDRt/sYfIx1rsckoK39IZuotU2D94J2yk/UTZd8fUczrC5Kn9bkj4T5ZJmABQ+U1OVEXNHnVLDoYhFyL+WLqXYDSa2KVm0tgIfQG4n8npEvOHBeq/sR9P4mvbwg838B9fMkYpHfkdk+yzful0OvpzSdvsRVDaW6pU7Gk3ey/78EOHBQzKBpniHO8Eycj2y05DZicJ4S0r1YHKqRPro+RGtpq9Lnb4KyJmpjFSaS8XqkYVSdO4UzbtKAp/l9mVYJWwEq3+X5my1tlAgK3xQGgAA","moduleVersion":2.24,"moduleLenguage":"ENG","searchPlaceHolder":"If you want to search for a random anime, just type 'random'","changelog":"2.16 - Fixed the megacloud resolver","moduleType":"Video","baseURL":"https://aniwatch.to/","moduleDeveloperSite":"https://bilnaa.github.io/main/","UpdateSite":"https://raw.githubusercontent.com/mprotmod/Modules-KETSU/main/Module%20Parser%20KETSU/aniwatch.json","preferedServer":"MEGACLOUD","preferedDownloadServer":"MEGACLOUD","blackListed":[""],"moduleCreatorIdJNDjSvRFRiorSWgBagab":{"path":"oxKdw","id":"moduleInfosection","sectionsHidden":[],"options":{"name":"Module Info","listName":"Parameters"},"cellsHidden":false},"moduleCreatorIdbdPLcIAmNwtGqhIoaIcA":{"path":"wfoFI","id":"moduleInfocell","sectionsHidden":[],"options":{"name":"Parameters"},"cellsHidden":false}},"global":{"variables":[{"key":"","value":""}],"cookies":[{"key":"","value":""}],"headers":[{"key":"","value":""}]},"mainPage":[{"request":{"url":"https://hianime.to//home/","method":"get","headers":[{"key":"","value":"","moduleCreatorHeaderisActive":true}]},"extra":{"commands":[{"commandName":"","params":[{"key":"","value":""}]}],"extraInfo":[{"key":"LoadText","value":"False"}]},"javascriptConfig":{"removeJavascript":true,"loadInWebView":false,"javaScript":"\n        try {\n\n             \n\n        var KETSU_ASYNC = true;\n        \n        /* JAVASCRIPT STARTS */            const DefaultLayouts = {\n    ultraWideFull: 'ultraWideFull',\n    ultraWide: 'ultraWide',\n    wideFull: 'wideFull',\n    wide: 'wide',\n    wideStrechedFull: 'wideStrechedFull',\n    wideStrechedFullDouble: 'WideStrechedFullDouble',\n    wideStreched: 'wideStreched',\n    wideStrechedDouble: 'wideStrechedDouble',\n    wideStrechedFullList: 'wideStrechedFullList',\n    wideStrechedList: 'wideStrechedList',\n    doublets: 'doublets',\n    doubletsDouble: 'doubletsDouble',\n    doubletsFull: 'doubletsFull',\n    doubletsFullDouble: 'doubletsFullDouble',\n    doubletsConstant: 'doubletsConstant',\n    doubletsDoubleConstant: 'doubletsDoubleConstant',\n    doubletsFullConstant: 'doubletsFullConstant',\n    doubletsFullDoubleConstant: 'doubletsFullDoubleConstant',\n    longDoublets: 'longDoublets',\n    longDoubletsDouble: 'longDoubletsDouble',\n    longDoubletsFull: 'longDoubletsFull',\n    longDoubletsFullDouble: 'longDoubletsFullDouble',\n    longDoubletsConstant: 'longDoubletsConstant',\n    longDoubletsDoubleConstant: 'longDoubletsDoubleConstant',\n    longDoubletsFullConstant: 'longDoubletsFullConstant',\n    longDoubletsFullDoubleConstant: 'longDoubletsFullDoubleConstant',\n    triplets: 'triplets',\n    tripletsDouble: 'tripletsDouble',\n    tripletsFull: 'tripletsFull',\n    tripletsFullDouble: 'tripletsFullDouble',\n    tripletsConstant: 'tripletsConstant',\n    tripletsDoubleConstant: 'tripletsDoubleConstant',\n    tripletsFullConstant: 'tripletsFullConstant',\n    tripletsFullDoubleConstant: 'tripletsFullDoubleConstant',\n    longTriplets: 'longTriplets',\n    longTripletsDouble: 'longTripletsDouble',\n    longTripletsFull: 'longTripletsFull',\n    longTripletsFullDouble: 'longTripletsFullDouble',\n    longTripletsConstant: 'longTripletsConstant',\n    longTripletsDoubleConstant: 'longTripletsDoubleConstant',\n    longTripletsFullConstant: 'longTripletsFullConstant',\n    longTripletsFullDoubleConstant: 'longTripletsFullDoubleConstant',\n    none: ''\n};\nconst CellDesings = {\n    Special1: 'Special1',\n    Special2: 'Special2',\n    Special3: 'Special3',\n    CELLHelperText: 'CELLHelperText',\n    small1: 'small1',\n    small2: 'small2',\n    normal1: 'normal1',\n    normal2: 'normal2',\n    normal3: 'normal3',\n    normal4: 'normal4',\n    normal5: 'normal5',\n    normal6: 'normal6',\n    normal7: 'normal7',\n    wide1: 'wide1',\n    wide2: 'wide2',\n    wide3: 'wide3',\n    wide4: 'wide4',\n    wide5: 'wide5',\n    wide6: 'wide6',\n    wide7: 'wide7',\n    wide8: 'wide8',\n    wide9: 'wide9',\n    wide10: 'wide10',\n    wide11: 'wide11'\n};\nconst Paging = {\n    leading: 'leading',\n    centered: 'centered',\n    none: ''\n};\nconst Orientation = {\n    horizontal: 'horizontal',\n    vertical: 'vertical'\n};\n\nfunction MainPage ( request, extra, javascriptConfig, output ) {\n    this.request = request;\n    this.extra = extra;\n    this.javascriptConfig = javascriptConfig;\n    this.output = output;\n}\n\nfunction ModuleRequest ( url, method, headers, httpBody ) {\n    this.url = url;\n    this.method = method;\n    this.headers = headers;\n    this.httpBody = httpBody;\n}\n\nfunction Extra ( commands, extraInfo ) {\n    this.commands = commands;\n    this.extraInfo = extraInfo;\n}\n\nfunction Commands ( commandName, params ) {\n    this.commandName = commandName;\n    this.params = params;\n}\n\nfunction JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n    this.removeJavascript = removeJavascript;\n    this.loadInWebView = loadInWebView;\n    this.javaScript = javaScript;\n}\n\nfunction KeyValue ( key, value ) {\n    this.key = key;\n    this.value = value;\n}\n\nfunction Output ( cellDesing, orientation, defaultLayout, paging, section, layout, data ) {\n    this.cellDesing = cellDesing;\n    this.orientation = orientation;\n    this.defaultLayout = defaultLayout;\n    this.paging = paging;\n    this.section = section;\n    this.layout = layout;\n    this.data = data;\n}\n\nfunction Section ( sectionName, separator ) {\n    this.sectionName = sectionName;\n    this.separator = separator;\n}\n\nfunction Layout ( insets, visibleCellsWidthS, visibleCellsWidthM, visibleCellsWidthL, visibleCellsHeight, heightForVisibleCells, cellSize, ratio, constant, horizontalSpacing, verticalSpacing ) {\n    this.insets = insets;\n    this.visibleCellsWidthS = visibleCellsWidthS;\n    this.visibleCellsWidthM = visibleCellsWidthM;\n    this.visibleCellsWidthL = visibleCellsWidthL;\n    this.visibleCellsHeight = visibleCellsHeight;\n    this.heightForVisibleCells = heightForVisibleCells;\n    this.cellSize = cellSize;\n    this.ratio = ratio;\n    this.constant = constant;\n    this.horizontalSpacing = horizontalSpacing;\n    this.verticalSpacing = verticalSpacing;\n}\n\nfunction Insets ( top, bottom, left, right ) {\n    this.top = top;\n    this.bottom = bottom;\n    this.left = left;\n    this.right = right;\n}\n\nfunction Size ( width, height ) {\n    this.width = width;\n    this.height = height;\n}\n\nfunction Ratio ( inRelation, number1, number2 ) {\n    this.inRelation = inRelation;\n    this.number1 = number1;\n    this.number2 = number2;\n}\n\nfunction Data ( image, title, description, field1, field2, field3, field4, isChapter, link, openInWebView ) {\n    this.image = image;\n    this.title = title;\n    this.description = description;\n    this.field1 = field1;\n    this.field2 = field2;\n    this.field3 = field3;\n    this.field4 = field4;\n    this.isChapter = isChapter;\n    this.link = link;\n    this.openInWebView = openInWebView;\n}\n\nfunction shuffle ( a ) {\n    var j, x, i;\n    for ( i = a.length - 1; i > 0; i-- ) {\n            j = Math.floor( Math.random( ) * ( i + 1 ) );\n            x = a[ i ];\n            a[ i ] = a[ j ];\n            a[ j ] = x;\n    }\n    return a;\n}\nvar savedData = document.getElementById( 'ketsu-final-data' );\nvar parsedJson = JSON.parse( savedData.innerHTML );\nlet emptyKeyValue = [ new KeyValue( '', '' ) ];\nlet emptyKeyValue1 = [ new KeyValue( 'X-Requested-With', 'XMLHttpRequest' ) ];\nvar LoadText = parsedJson.extra.extraInfo[ 0 ].value;\nconst dummyQuest = new ModuleRequest( '', 'get', emptyKeyValue, null );\nconst streamta = new ModuleRequest( 'ketsuapp://?moduleData=https://raw.githubusercontent.com/Bilnaa/beta-ketsu/main/zoro.json', 'get', emptyKeyValue, null );\nconst infoText = new Data( dummyQuest, \"Subs are only available on newer versions of Ketsu, on the Rapid-Cloud resolver and won't work if you have the App Store version.\\nClick on this message if you are using the App Store version of KETSU and not getting subtitles. If you do so don't forget to refresh this page.\", '', '', '', '', '', false, streamta, false );\nlet output = [ ];\nvar sliderArray = [ ];\nvar slider = document.querySelectorAll( '#slider .swiper-wrapper .swiper-slide' );\nfor ( let slide of slider ) {\n    let title = slide.querySelector( 'img' ).alt;\n    let image = slide.querySelector( 'img' ).dataset.src;\n    image = new ModuleRequest( image, 'get', emptyKeyValue, '' );\n    let link = 'https://hianime.to' + slide.querySelector( '.btn.btn-secondary.btn-radius' ).href.replace('/watch','');\n    link = new ModuleRequest( link, 'get', emptyKeyValue, '' );\n    let description = slide.querySelector( '.desi-depion' ).innerText;\n    let type = slide.querySelector( 'div.sc-detail > div:nth-child(1)' ).innerText;\n    let date = 'First Aired : ' + slide.querySelector( '.scd-item.m-hide' ).innerText;\n    sliderArray.push( new Data( image, title + ' ' + type, description, title, date, '', '', false, link ) );\n}\nvar TopAiring = [ ];\nvar best = document.querySelectorAll( '#anime-featured > div > div > div > div:nth-child(1) > div > div.anif-block-ul > ul li' );\nfor ( let list of best ) {\n    try {\n        let title = list.querySelector( 'img' ).alt;\n        let link = 'https://hianime.to' + list.querySelector( 'a' ).href.replace('/watch','');\n        link = new ModuleRequest( link, 'get', emptyKeyValue, null );\n        let image = list.querySelector( 'img' ).dataset.src;\n        image = new ModuleRequest( image, 'get', emptyKeyValue, null );\n        let ep = list.querySelector( '.tick-item.tick-sub' ).textContent.trim( );\n        let language = '??';\n        try {\n                language = list.querySelector( 'span:nth-child(1)' ).textContent.trim( );\n        } catch (e) {\n            console.log(e)\n        }\n    TopAiring.push( new Data( image, title, '', ep, language, '', '', false, link ) );\n    } catch(e){\n        console.log(e)\n    }\n}\nvar LastEpisodes = [ ];\nvar last = document.querySelectorAll( '#main-content > section:nth-child(2) > div.tab-content > div > div.film_list-wrap div.flw-item' );\nfor ( let list of last ) {\n    try {\n        let ticks =  list.querySelectorAll('.tick .tick-item');\n    let title = list.querySelector( 'img' ).alt;\n    let link = 'https://hianime.to' + list.querySelector( 'a' ).href.replace('/watch','');;\n    link = new ModuleRequest( link, 'get', emptyKeyValue, null );\n    let image = list.querySelector( 'img' ).dataset.src;\n    image = new ModuleRequest( image, 'get', emptyKeyValue, null );\n    let epTotal = '';\n    epTotal = list.querySelector('.tick-item.tick-eps');\n    if(!epTotal){\n          epTotal =  ticks[0].textContent;\n    } else {\n        epTotal = epTotal.textContent.trim();\n    }\n    let ep = `${ticks[0].textContent.trim()}/${epTotal}`;\n    let language = '';\n    for(let i = 0; i<ticks.length; i++){\n        if(ticks.length > 1 && ticks[i].classList.contains('tick-sub') && ticks[i+1].classList.contains('tick-dub')){\n            language = 'SUB/DUB';\n            break;\n        } else if(ticks[i].classList.contains('tick-sub')){\n            language = 'SUB';\n            break;\n        } else if(ticks[i].classList.contains('tick-dub')){\n            language = 'DUB';\n            break;\n        }\n    }\n    LastEpisodes.push( new Data( image, title, 'test1', ep, language, 'test2', 'test3', false, link ) );\n    }catch(e){\n        console.log(e)\n    }\n    \n}\nvar NewAnimes = [ ];\nvar mNewAnimes = Array.from(document.querySelectorAll(\".block_area_home\") || [])\nmNewAnimes.filter((e) => e.querySelector(\".cat-heading\").innerText.includes(\"New\")).pop()?.querySelectorAll(\".flw-item\") || []\nfor ( let list of mNewAnimes ) {\n    try {\n        let ticks =  list.querySelectorAll('.tick.ltr .tick-item');\n    let title = list.querySelector( 'img' ).alt;\n    let link = 'https://hianime.to/' + list.querySelector( 'a' ).href.replace('/watch','');;\n    link = new ModuleRequest( link, 'get', emptyKeyValue, null );\n    let image = list.querySelector( 'img' ).dataset.src;\n    image = new ModuleRequest( image, 'get', emptyKeyValue, null );\n    let epTotal = '';\n    epTotal = list.querySelector('.tick-item.tick-eps');\n    if(!epTotal){\n          epTotal =  ticks[0].textContent.trim();\n    } else {\n        epTotal = epTotal.textContent.trim();\n    }\n    let ep = ``;\n    if(epTotal== ''){\n        ep = `${ticks[0].textContent.trim()}`\n    } else {\n        ep = `${ticks[0].textContent.trim()}/${epTotal}`\n    }\n    let language = '';\n    for(let i = 0; i<ticks.length; i++){\n        if(ticks.length > 1 && ticks[i].classList.contains('tick-sub') && ticks[i+1].classList.contains('tick-dub')){\n            language = 'SUB/DUB';\n            break;\n        } else if(ticks[i].classList.contains('tick-sub')){\n            language = 'SUB';\n            break;\n        } else if(ticks[i].classList.contains('tick-dub')){\n            language = 'DUB';\n            break;\n        }\n    }\n    NewAnimes.push( new Data( image, title, '', ep, language, '', '', false, link ) );\n    } catch(e){\n        console.log(e)\n    }\n    \n}\nlet MostViewed = [ ];\nvar mostviewed = document.querySelectorAll( '#top-viewed-week > ul > li' );\nfor ( let list of mostviewed ) {\n    try {\n        let title = list.querySelector( 'img' ).alt;\n    let link = 'https://hianime.to/' + list.querySelector( 'a' ).href.replace('/watch','');;\n    link = new ModuleRequest( link, 'get', emptyKeyValue, null );\n    let image = list.querySelector( 'img' ).dataset.src;\n    image = new ModuleRequest( image, 'get', emptyKeyValue, null );\n    let views = '??';\n    let viewCount = list.querySelector( '.fdi-item');\n    if(viewCount){\n        views = viewCount.textContent.trim();\n    }\n    MostViewed.push( new Data( image, title, '', views, '', '', '', false, link ) );\n    }catch(e){\n        console.log(e)\n    }\n}\nlet layout = new Layout( new Insets( 0, 0, 0, 0 ), 1, 1, 1, 1, 0, new Size( 400, 105 ), new Ratio( 'width', 6, 10 ), new Size( 0, 0 ), 0, 0 );\nlet layout1 = new Layout( new Insets( 0, 0, 10, 10 ), 1, 1, 1, 1, 0, new Size( 400, 105 ), new Ratio( 'width', 6, 10 ), new Size( 0, 0 ), 0, 0 );\noutput.push( new Output( CellDesings.Special3, Orientation.horizontal, DefaultLayouts.wideStrechedFull, Paging.leading, new Section( '', true ), layout, shuffle( sliderArray ) ) );\n\noutput.push( new Output( CellDesings.Special1, Orientation.horizontal, DefaultLayouts.triplets, Paging.none, new Section( 'Top Airing : ', true ), null, TopAiring ) );\noutput.push( new Output( CellDesings.normal1, Orientation.horizontal, DefaultLayouts.longTripletsDouble, Paging.leading, new Section( 'Last Episodes: ', true ), null, LastEpisodes ) );\noutput.push( new Output( CellDesings.wide6, Orientation.horizontal, DefaultLayouts.longDoubletsFull, Paging.none, new Section( 'New On Aniwatch', true ), null, NewAnimes ) );\noutput.push( new Output( CellDesings.normal2, Orientation.horizontal, DefaultLayouts.longTripletsDouble, Paging.none, new Section( 'Most Viewed Animes', true ), null, MostViewed ) );\nlet date = new Date( );\nlet year = date.getFullYear( );\nlet day = date.getDate( );\nlet month = date.getMonth( ) + 1;\nlet timezoneOffset = date.getTimezoneOffset( );\nif ( month < 10 ) {\n    month = '0' + month;\n}\nif ( day < 10 ) {\n    day = '' + '0' + day\n}\nlet nextRequest = `https://hianime.to/ajax/schedule/list?tzOffset=${timezoneOffset}&date=${year}-${month}-${day}`;\nlet MainPageObject = new MainPage( new ModuleRequest( nextRequest, 'get', emptyKeyValue1, null ), new Extra( [ new Commands( '', emptyKeyValue ) ], emptyKeyValue ), new JavascriptConfig( true, false, '' ), output );\nlet finalJson = JSON.stringify( MainPageObject );\nsavedData.innerHTML = finalJson;\nwindow.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');     /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "},"output":[{"cellDesing":"normal1","orientation":"vertical","defaultLayout":"wide","paging":"","section":{"sectionName":"","separator":false},"layout":{"insets":{"top":0,"bottom":0,"left":0,"right":0},"visibleCellsWidthS":2,"visibleCellsWidthM":2,"visibleCellsWidthL":2,"visibleCellsHeight":2,"heightForVisibleCells":400,"cellSize":{"width":300,"height":300},"ratio":{"inRelation":"width","number1":1,"number2":2},"constant":{"width":1,"height":2},"horizontalSpacing":0,"verticalSpacing":0},"data":[{"image":{"url":"","method":"get","headers":[{"key":"","value":""}],"httpBody":null},"title":"","description":"","field1":"","field2":"","field3":"","field4":"","openInWebView":false,"isChapter":false,"link":{"url":"","method":"","headers":[{"key":"","value":""}],"httpBody":null}}]}],"moduleCreatorIdfTodgKWnHDxeyNehjvZE":{"path":"MqWHq","id":"mainPage,0cell","sectionsHidden":[],"options":{"name":"Request"},"cellsHidden":false,"openedMenu":"Javascript","openedRequestMenu":"Headers","javascriptEditorScroll":237,"async":true}},{"request":{"url":"","method":"get","headers":[{"key":"","value":"","moduleCreatorHeaderisActive":true}]},"extra":{"commands":[{"commandName":"","params":[{"key":"","value":""}]}],"extraInfo":[{"key":"","value":""}]},"javascriptConfig":{"removeJavascript":false,"loadInWebView":false,"javaScript":"\n        try {\n\n             \n\n        var KETSU_ASYNC = true;\n        \n        /* JAVASCRIPT STARTS */               const DefaultLayouts = {\n                  ultraWideFull: 'ultraWideFull',\n                  ultraWide: 'ultraWide',\n                  wideFull: 'wideFull',\n                  wide: 'wide',\n                  wideStrechedFull: 'wideStrechedFull',\n                  wideStrechedFullDouble: 'WideStrechedFullDouble',\n                  wideStreched: 'wideStreched',\n                  wideStrechedDouble: 'wideStrechedDouble',\n                  wideStrechedFullList: 'wideStrechedFullList',\n                  wideStrechedList: 'wideStrechedList',\n                  doublets: 'doublets',\n                  doubletsDouble: 'doubletsDouble',\n                  doubletsFull: 'doubletsFull',\n                  doubletsFullDouble: 'doubletsFullDouble',\n                  doubletsConstant: 'doubletsConstant',\n                  doubletsDoubleConstant: 'doubletsDoubleConstant',\n                  doubletsFullConstant: 'doubletsFullConstant',\n                  doubletsFullDoubleConstant: 'doubletsFullDoubleConstant',\n                  longDoublets: 'longDoublets',\n                  longDoubletsDouble: 'longDoubletsDouble',\n                  longDoubletsFull: 'longDoubletsFull',\n                  longDoubletsFullDouble: 'longDoubletsFullDouble',\n                  longDoubletsConstant: 'longDoubletsConstant',\n                  longDoubletsDoubleConstant: 'longDoubletsDoubleConstant',\n                  longDoubletsFullConstant: 'longDoubletsFullConstant',\n                  longDoubletsFullDoubleConstant: 'longDoubletsFullDoubleConstant',\n                  triplets: 'triplets',\n                  tripletsDouble: 'tripletsDouble',\n                  tripletsFull: 'tripletsFull',\n                  tripletsFullDouble: 'tripletsFullDouble',\n                  tripletsConstant: 'tripletsConstant',\n                  tripletsDoubleConstant: 'tripletsDoubleConstant',\n                  tripletsFullConstant: 'tripletsFullConstant',\n                  tripletsFullDoubleConstant: 'tripletsFullDoubleConstant',\n                  longTriplets: 'longTriplets',\n                  longTripletsDouble: 'longTripletsDouble',\n                  longTripletsFull: 'longTripletsFull',\n                  longTripletsFullDouble: 'longTripletsFullDouble',\n                  longTripletsConstant: 'longTripletsConstant',\n                  longTripletsDoubleConstant: 'longTripletsDoubleConstant',\n                  longTripletsFullConstant: 'longTripletsFullConstant',\n                  longTripletsFullDoubleConstant: 'longTripletsFullDoubleConstant',\n                  none: ''\n          };\n          const CellDesings = {\n                  Special1: 'Special1',\n                  Special2: 'Special2',\n                  Special3: 'Special3',\n                  CELLHelperText: 'CELLHelperText',\n                  small1: 'small1',\n                  small2: 'small2',\n                  normal1: 'normal1',\n                  normal2: 'normal2',\n                  normal3: 'normal3',\n                  normal4: 'normal4',\n                  normal5: 'normal5',\n                  normal6: 'normal6',\n                  normal7: 'normal7',\n                  wide1: 'wide1',\n                  wide2: 'wide2',\n                  wide3: 'wide3',\n                  wide4: 'wide4',\n                  wide5: 'wide5',\n                  wide6: 'wide6',\n                  wide7: 'wide7',\n                  wide8: 'wide8',\n                  wide9: 'wide9',\n                  wide10: 'wide10',\n                  wide11: 'wide11'\n          };\n          const Paging = {\n                  leading: 'leading',\n                  centered: 'centered',\n                  none: ''\n          };\n          const Orientation = {\n                  horizontal: 'horizontal',\n                  vertical: 'vertical'\n          };\n\n          function MainPage ( request, extra, javascriptConfig, output ) {\n                  this.request = request;\n                  this.extra = extra;\n                  this.javascriptConfig = javascriptConfig;\n                  this.output = output;\n          }\n\n          function ModuleRequest ( url, method, headers, httpBody ) {\n                  this.url = url;\n                  this.method = method;\n                  this.headers = headers;\n                  this.httpBody = httpBody;\n          }\n\n          function Extra ( commands, extraInfo ) {\n                  this.commands = commands;\n                  this.extraInfo = extraInfo;\n          }\n\n          function Commands ( commandName, params ) {\n                  this.commandName = commandName;\n                  this.params = params;\n          }\n\n          function JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n                  this.removeJavascript = removeJavascript;\n                  this.loadInWebView = loadInWebView;\n                  this.javaScript = javaScript;\n          }\n\n          function KeyValue ( key, value ) {\n                  this.key = key;\n                  this.value = value;\n          }\n\n          function Output ( cellDesing, orientation, defaultLayout, paging, section, layout, data ) {\n                  this.cellDesing = cellDesing;\n                  this.orientation = orientation;\n                  this.defaultLayout = defaultLayout;\n                  this.paging = paging;\n                  this.section = section;\n                  this.layout = layout;\n                  this.data = data;\n          }\n\n          function Section ( sectionName, separator ) {\n                  this.sectionName = sectionName;\n                  this.separator = separator;\n          }\n\n          function Layout ( insets, visibleCellsWidthS, visibleCellsWidthM, visibleCellsWidthL, visibleCellsHeight, heightForVisibleCells, cellSize, ratio, constant, horizontalSpacing, verticalSpacing ) {\n                  this.insets = insets;\n                  this.visibleCellsWidthS = visibleCellsWidthS;\n                  this.visibleCellsWidthM = visibleCellsWidthM;\n                  this.visibleCellsWidthL = visibleCellsWidthL;\n                  this.visibleCellsHeight = visibleCellsHeight;\n                  this.heightForVisibleCells = heightForVisibleCells;\n                  this.cellSize = cellSize;\n                  this.ratio = ratio;\n                  this.constant = constant;\n                  this.horizontalSpacing = horizontalSpacing;\n                  this.verticalSpacing = verticalSpacing;\n          }\n\n          function Insets ( top, bottom, left, right ) {\n                  this.top = top;\n                  this.bottom = bottom;\n                  this.left = left;\n                  this.right = right;\n          }\n\n          function Size ( width, height ) {\n                  this.width = width;\n                  this.height = height;\n          }\n\n          function Ratio ( inRelation, number1, number2 ) {\n                  this.inRelation = inRelation;\n                  this.number1 = number1;\n                  this.number2 = number2;\n          }\n\n          function Data ( image, title, description, field1, field2, field3, field4, isChapter, link, openInWebView ) {\n                  this.image = image;\n                  this.title = title;\n                  this.description = description;\n                  this.field1 = field1;\n                  this.field2 = field2;\n                  this.field3 = field3;\n                  this.field4 = field4;\n                  this.isChapter = isChapter;\n                  this.link = link;\n                  this.openInWebView = openInWebView;\n          }\n\n          function shuffle ( a ) {\n                  var j, x, i;\n                  for ( i = a.length - 1; i > 0; i-- ) {\n                          j = Math.floor( Math.random( ) * ( i + 1 ) );\n                          x = a[ i ];\n                          a[ i ] = a[ j ];\n                          a[ j ] = x;\n                  }\n                  return a;\n          }\n\n          function checkTime ( ) {\n                  var now = new Date( );\n                  var hour = now.getHours( );\n                  var minute = now.getMinutes( );\n                  var second = now.getSeconds( );\n                  var time = hour + ':' + minute;\n                  return time;\n          }\n\n          function getDaysInMonth ( month, year ) {\n                  return new Date( year, month, 0 ).getDate( );\n          }\n          var savedData = document.getElementById( 'ketsu-final-data' );\n          var parsedJson = JSON.parse( savedData.innerHTML );\n          let emptyKeyValue = [ new KeyValue( '', '' ) ];\n          let emptyKeyValue1 = [ new KeyValue( 'X-Requested-With', 'XMLHttpRequest' ) ];\n          let output = parsedJson.output;\n          var script = document.querySelector( 'script' ).innerText.replace( '*/', '' ).replace( '/*', '' );\n          var json = JSON.parse( script ).html;\n          var nextRequest = '';\n          var schedule = [ ];\n          var htmldom = new DOMParser( ).parseFromString( json, 'text/html' );\n          var content = htmldom.querySelectorAll( 'li' );\n          var actualtime = checkTime( );\n          for ( anime of content ) {\n                  var link = 'https://hianime.to' + anime.querySelector( 'a' ).getAttribute( 'href' ).replace('/watch','');\n                  link = new ModuleRequest( link, 'get', emptyKeyValue, null );\n                  var dummyQuest = new ModuleRequest( '', 'get', emptyKeyValue, null );\n                  var episode = anime.querySelector( '.fd-play' ).innerText.trim( );\n                  var time = anime.querySelector( '.time' ).innerText.trim( );\n                  if ( ( parseInt( time.split( ':' )[ 0 ] ) > parseInt( actualtime.split( ':' )[ 0 ] ) ) || ( ( parseInt( time.split( ':' )[ 0 ] ) == parseInt( actualtime.split( ':' )[ 0 ] ) ) && ( parseInt( time.split( ':' )[ 1 ] ) > parseInt( actualtime.split( ':' )[ 1 ] ) ) ) ) {\n                          console.log( 'not aired yet' );\n                          var title = time + ' - ' + anime.querySelector( 'h3' ).innerText.trim( ) + ' ' + episode;\n                          schedule.push( new Data( dummyQuest, title, '', '', '', '', '', false, link, false ) );\n                  }\n          }\n          var testLayout = new Layout( new Insets( 0, 0, 10, 10 ), 1, 2, 3, 6, 300, new Size( 0, 0 ), null, new Size( 0, 0 ), 0, 0 );\n          if ( schedule.length == 0 ) {\n                  var date = new Date( );\n                  var year = date.getFullYear( );\n                  var day = date.getDate( );\n                  var month = date.getMonth( ) + 1;\n                  var daysinmonth = getDaysInMonth( month, year );\n                  var timezoneOffset = date.getTimezoneOffset( );\n                  if ( month < 10 ) {\n                          month = '0' + month;\n                  }\n                  var nextDay = day + 1;\n                  if ( nextDay > daysinmonth ) {\n                          nextDay = '01';\n                          month = month + 1;\n                          if ( month > 12 ) {\n                                  month = '01';\n                                  year = year + 1;\n                          }\n                  } else {\n                          nextDay = day + 1;\n                  };\n                  if ( nextDay < 10 ) {\n                          nextDay = '' + '0' + nextDay\n                  };\n                  var nextRequest = `https://hianime.to/ajax/schedule/list?tzOffset=${timezoneOffset}&date=${year}-${month}-${nextDay}`;\n          } else {\n                  output.push( new Output( CellDesings.small2, Orientation.vertical, DefaultLayouts.none, Paging.leading, new Section( 'Airs Today', true ), testLayout, schedule ) );\n          }\n          let MainPageObject = new MainPage( new ModuleRequest( nextRequest, 'get', emptyKeyValue1, null ), new Extra( [ new Commands( '', emptyKeyValue ) ], emptyKeyValue ), new JavascriptConfig( true, false, '' ), output );\n          var finalJson = JSON.stringify( MainPageObject );\n          savedData.innerHTML = finalJson;\nwindow.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');     /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "},"output":[{"cellDesing":"normal1","orientation":"vertical","defaultLayout":"wide","paging":"","section":{"sectionName":"","separator":false},"layout":{"insets":{"top":0,"bottom":0,"left":0,"right":0},"visibleCellsWidthS":2,"visibleCellsWidthM":2,"visibleCellsWidthL":2,"visibleCellsHeight":2,"heightForVisibleCells":400,"cellSize":{"width":300,"height":300},"ratio":{"inRelation":"width","number1":1,"number2":2},"constant":{"width":1,"height":2},"horizontalSpacing":0,"verticalSpacing":0},"data":[{"image":{"url":"","method":"get","headers":[{"key":"","value":""}],"httpBody":null},"title":"","description":"","field1":"","field2":"","field3":"","field4":"","openInWebView":false,"isChapter":false,"link":{"url":"","method":"","headers":[{"key":"","value":""}],"httpBody":null}}]}],"moduleCreatorIdEeUzalXOKrstKukdZpWP":{"path":"rzamQ","id":"mainPage,1cell","sectionsHidden":[],"options":{"name":"Request"},"cellsHidden":false,"openedMenu":"Javascript","async":true,"javascriptEditorScroll":218}},{"request":{"url":"","method":"get","headers":[{"key":"","value":"","moduleCreatorHeaderisActive":true}]},"extra":{"commands":[{"commandName":"","params":[{"key":"","value":""}]}],"extraInfo":[{"key":"","value":""}]},"javascriptConfig":{"removeJavascript":false,"loadInWebView":false,"javaScript":"\n        try {\n\n             \n\n        var KETSU_ASYNC = true;\n        \n        /* JAVASCRIPT STARTS */               const DefaultLayouts = {\n                  ultraWideFull: 'ultraWideFull',\n                  ultraWide: 'ultraWide',\n                  wideFull: 'wideFull',\n                  wide: 'wide',\n                  wideStrechedFull: 'wideStrechedFull',\n                  wideStrechedFullDouble: 'WideStrechedFullDouble',\n                  wideStreched: 'wideStreched',\n                  wideStrechedDouble: 'wideStrechedDouble',\n                  wideStrechedFullList: 'wideStrechedFullList',\n                  wideStrechedList: 'wideStrechedList',\n                  doublets: 'doublets',\n                  doubletsDouble: 'doubletsDouble',\n                  doubletsFull: 'doubletsFull',\n                  doubletsFullDouble: 'doubletsFullDouble',\n                  doubletsConstant: 'doubletsConstant',\n                  doubletsDoubleConstant: 'doubletsDoubleConstant',\n                  doubletsFullConstant: 'doubletsFullConstant',\n                  doubletsFullDoubleConstant: 'doubletsFullDoubleConstant',\n                  longDoublets: 'longDoublets',\n                  longDoubletsDouble: 'longDoubletsDouble',\n                  longDoubletsFull: 'longDoubletsFull',\n                  longDoubletsFullDouble: 'longDoubletsFullDouble',\n                  longDoubletsConstant: 'longDoubletsConstant',\n                  longDoubletsDoubleConstant: 'longDoubletsDoubleConstant',\n                  longDoubletsFullConstant: 'longDoubletsFullConstant',\n                  longDoubletsFullDoubleConstant: 'longDoubletsFullDoubleConstant',\n                  triplets: 'triplets',\n                  tripletsDouble: 'tripletsDouble',\n                  tripletsFull: 'tripletsFull',\n                  tripletsFullDouble: 'tripletsFullDouble',\n                  tripletsConstant: 'tripletsConstant',\n                  tripletsDoubleConstant: 'tripletsDoubleConstant',\n                  tripletsFullConstant: 'tripletsFullConstant',\n                  tripletsFullDoubleConstant: 'tripletsFullDoubleConstant',\n                  longTriplets: 'longTriplets',\n                  longTripletsDouble: 'longTripletsDouble',\n                  longTripletsFull: 'longTripletsFull',\n                  longTripletsFullDouble: 'longTripletsFullDouble',\n                  longTripletsConstant: 'longTripletsConstant',\n                  longTripletsDoubleConstant: 'longTripletsDoubleConstant',\n                  longTripletsFullConstant: 'longTripletsFullConstant',\n                  longTripletsFullDoubleConstant: 'longTripletsFullDoubleConstant',\n                  none: ''\n          };\n          const CellDesings = {\n                  Special1: 'Special1',\n                  Special2: 'Special2',\n                  Special3: 'Special3',\n                  CELLHelperText: 'CELLHelperText',\n                  small1: 'small1',\n                  small2: 'small2',\n                  normal1: 'normal1',\n                  normal2: 'normal2',\n                  normal3: 'normal3',\n                  normal4: 'normal4',\n                  normal5: 'normal5',\n                  normal6: 'normal6',\n                  normal7: 'normal7',\n                  wide1: 'wide1',\n                  wide2: 'wide2',\n                  wide3: 'wide3',\n                  wide4: 'wide4',\n                  wide5: 'wide5',\n                  wide6: 'wide6',\n                  wide7: 'wide7',\n                  wide8: 'wide8',\n                  wide9: 'wide9',\n                  wide10: 'wide10',\n                  wide11: 'wide11'\n          };\n          const Paging = {\n                  leading: 'leading',\n                  centered: 'centered',\n                  none: ''\n          };\n          const Orientation = {\n                  horizontal: 'horizontal',\n                  vertical: 'vertical'\n          };\n\n          function MainPage ( request, extra, javascriptConfig, output ) {\n                  this.request = request;\n                  this.extra = extra;\n                  this.javascriptConfig = javascriptConfig;\n                  this.output = output;\n          }\n\n          function ModuleRequest ( url, method, headers, httpBody ) {\n                  this.url = url;\n                  this.method = method;\n                  this.headers = headers;\n                  this.httpBody = httpBody;\n          }\n\n          function Extra ( commands, extraInfo ) {\n                  this.commands = commands;\n                  this.extraInfo = extraInfo;\n          }\n\n          function Commands ( commandName, params ) {\n                  this.commandName = commandName;\n                  this.params = params;\n          }\n\n          function JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n                  this.removeJavascript = removeJavascript;\n                  this.loadInWebView = loadInWebView;\n                  this.javaScript = javaScript;\n          }\n\n          function KeyValue ( key, value ) {\n                  this.key = key;\n                  this.value = value;\n          }\n\n          function Output ( cellDesing, orientation, defaultLayout, paging, section, layout, data ) {\n                  this.cellDesing = cellDesing;\n                  this.orientation = orientation;\n                  this.defaultLayout = defaultLayout;\n                  this.paging = paging;\n                  this.section = section;\n                  this.layout = layout;\n                  this.data = data;\n          }\n\n          function Section ( sectionName, separator ) {\n                  this.sectionName = sectionName;\n                  this.separator = separator;\n          }\n\n          function Layout ( insets, visibleCellsWidthS, visibleCellsWidthM, visibleCellsWidthL, visibleCellsHeight, heightForVisibleCells, cellSize, ratio, constant, horizontalSpacing, verticalSpacing ) {\n                  this.insets = insets;\n                  this.visibleCellsWidthS = visibleCellsWidthS;\n                  this.visibleCellsWidthM = visibleCellsWidthM;\n                  this.visibleCellsWidthL = visibleCellsWidthL;\n                  this.visibleCellsHeight = visibleCellsHeight;\n                  this.heightForVisibleCells = heightForVisibleCells;\n                  this.cellSize = cellSize;\n                  this.ratio = ratio;\n                  this.constant = constant;\n                  this.horizontalSpacing = horizontalSpacing;\n                  this.verticalSpacing = verticalSpacing;\n          }\n\n          function Insets ( top, bottom, left, right ) {\n                  this.top = top;\n                  this.bottom = bottom;\n                  this.left = left;\n                  this.right = right;\n          }\n\n          function Size ( width, height ) {\n                  this.width = width;\n                  this.height = height;\n          }\n\n          function Ratio ( inRelation, number1, number2 ) {\n                  this.inRelation = inRelation;\n                  this.number1 = number1;\n                  this.number2 = number2;\n          }\n\n          function Data ( image, title, description, field1, field2, field3, field4, isChapter, link, openInWebView ) {\n                  this.image = image;\n                  this.title = title;\n                  this.description = description;\n                  this.field1 = field1;\n                  this.field2 = field2;\n                  this.field3 = field3;\n                  this.field4 = field4;\n                  this.isChapter = isChapter;\n                  this.link = link;\n                  this.openInWebView = openInWebView;\n          }\n\n          function shuffle ( a ) {\n                  var j, x, i;\n                  for ( i = a.length - 1; i > 0; i-- ) {\n                          j = Math.floor( Math.random( ) * ( i + 1 ) );\n                          x = a[ i ];\n                          a[ i ] = a[ j ];\n                          a[ j ] = x;\n                  }\n                  return a;\n          }\n          var savedData = document.getElementById( 'ketsu-final-data' );\n          var parsedJson = JSON.parse( savedData.innerHTML );\n          let emptyKeyValue = [ new KeyValue( '', '' ) ];\n          let emptyKeyValue1 = [ new KeyValue( 'X-Requested-With', 'XMLHttpRequest' ) ];\n          let output = parsedJson.output;\n          var script = document.querySelector( 'script' ).innerText.replace( '*/', '' ).replace( '/*', '' );\n          var json = JSON.parse( script ).html;\n          var schedule = [ ];\n          var htmldom = new DOMParser( ).parseFromString( json, 'text/html' );\n          var content = htmldom.querySelectorAll( 'li' );\n          for ( anime of content ) {\n                  var link = 'https://hianime.to' + anime.querySelector( 'a' ).getAttribute( 'href' ).replace('/watch','');\n                  link = new ModuleRequest( link, 'get', emptyKeyValue, null );\n                  var dummyQuest = new ModuleRequest( '', 'get', emptyKeyValue, null );\n                  var episode = anime.querySelector( '.fd-play' ).innerText.trim( );\n                  var time = anime.querySelector( '.time' ).innerText.trim( );\n                  var title = time + ' - ' + anime.querySelector( 'h3' ).innerText.trim( ) + ' ' + episode;\n                  schedule.push( new Data( dummyQuest, title, '', '', '', '', '', false, link, false ) );\n          }\n          var testLayout = new Layout( new Insets( 0, 0, 10, 10 ), 1, 2, 3, 6, 300, new Size( 0, 0 ), null, new Size( 0, 0 ), 0, 0 );\n          output.push( new Output( CellDesings.small2, Orientation.vertical, DefaultLayouts.none, Paging.leading, new Section( 'Airs Tomorrow', true ), testLayout, schedule ) );\n          let MainPageObject = new MainPage( new ModuleRequest( '', 'get', emptyKeyValue, null ), new Extra( [ new Commands( '', emptyKeyValue ) ], emptyKeyValue ), new JavascriptConfig( true, false, '' ), output );\n          var finalJson = JSON.stringify( MainPageObject );\n          savedData.innerHTML = finalJson;\nwindow.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');     /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "},"output":[{"cellDesing":"normal1","orientation":"vertical","defaultLayout":"wide","paging":"","section":{"sectionName":"","separator":false},"layout":{"insets":{"top":0,"bottom":0,"left":0,"right":0},"visibleCellsWidthS":2,"visibleCellsWidthM":2,"visibleCellsWidthL":2,"visibleCellsHeight":2,"heightForVisibleCells":400,"cellSize":{"width":300,"height":300},"ratio":{"inRelation":"width","number1":1,"number2":2},"constant":{"width":1,"height":2},"horizontalSpacing":0,"verticalSpacing":0},"data":[{"image":{"url":"","method":"get","headers":[{"key":"","value":""}],"httpBody":null},"title":"","description":"","field1":"","field2":"","field3":"","field4":"","openInWebView":false,"isChapter":false,"link":{"url":"","method":"","headers":[{"key":"","value":""}],"httpBody":null}}]}],"moduleCreatorIdYuYvSXXjQfxkgwEWDebd":{"path":"MrlhA","id":"mainPage,2cell","sectionsHidden":[],"options":{"name":"Request"},"cellsHidden":false,"openedMenu":"Javascript","async":true,"javascriptEditorScroll":211}}],"search":[{"request":{"url":"https://hianime.to/search?keyword=<searched>&page=<page>","method":"get","headers":[{"key":"","value":"","moduleCreatorHeaderisActive":true}]},"separator":"%20","extra":{"commands":[{"commandName":"","params":[{"key":"","value":""}]}],"extraInfo":[{"key":"","value":""}]},"javascriptConfig":{"removeJavascript":true,"loadInWebView":false,"javaScript":"\n        try {\n\n             \n\n        var KETSU_ASYNC = true;\n        \n        /* JAVASCRIPT STARTS */             const DefaultLayouts = {\n    ultraWideFull: 'ultraWideFull',\n    ultraWide: 'ultraWide',\n    wideFull: 'wideFull',\n    wide: 'wide',\n    wideStrechedFull: 'wideStrechedFull',\n    wideStrechedFullDouble: 'WideStrechedFullDouble',\n    wideStreched: 'wideStreched',\n    wideStrechedDouble: 'wideStrechedDouble',\n    wideStrechedFullList: 'wideStrechedFullList',\n    wideStrechedList: 'wideStrechedList',\n    doublets: 'doublets',\n    doubletsDouble: 'doubletsDouble',\n    doubletsFull: 'doubletsFull',\n    doubletsFullDouble: 'doubletsFullDouble',\n    doubletsConstant: 'doubletsConstant',\n    doubletsDoubleConstant: 'doubletsDoubleConstant',\n    doubletsFullConstant: 'doubletsFullConstant',\n    doubletsFullDoubleConstant: 'doubletsFullDoubleConstant',\n    longDoublets: 'longDoublets',\n    longDoubletsDouble: 'longDoubletsDouble',\n    longDoubletsFull: 'longDoubletsFull',\n    longDoubletsFullDouble: 'longDoubletsFullDouble',\n    longDoubletsConstant: 'longDoubletsConstant',\n    longDoubletsDoubleConstant: 'longDoubletsDoubleConstant',\n    longDoubletsFullConstant: 'longDoubletsFullConstant',\n    longDoubletsFullDoubleConstant: 'longDoubletsFullDoubleConstant',\n    triplets: 'triplets',\n    tripletsDouble: 'tripletsDouble',\n    tripletsFull: 'tripletsFull',\n    tripletsFullDouble: 'tripletsFullDouble',\n    tripletsConstant: 'tripletsConstant',\n    tripletsDoubleConstant: 'tripletsDoubleConstant',\n    tripletsFullConstant: 'tripletsFullConstant',\n    tripletsFullDoubleConstant: 'tripletsFullDoubleConstant',\n    longTriplets: 'longTriplets',\n    longTripletsDouble: 'longTripletsDouble',\n    longTripletsFull: 'longTripletsFull',\n    longTripletsFullDouble: 'longTripletsFullDouble',\n    longTripletsConstant: 'longTripletsConstant',\n    longTripletsDoubleConstant: 'longTripletsDoubleConstant',\n    longTripletsFullConstant: 'longTripletsFullConstant',\n    longTripletsFullDoubleConstant: 'longTripletsFullDoubleConstant',\n    none: ''\n};\nconst CellDesings = {\n    Special1: 'Special1',\n    Special2: 'Special2',\n    Special3: 'Special3',\n    CELLHelperText: 'CELLHelperText',\n    small1: 'small1',\n    small2: 'small2',\n    normal1: 'normal1',\n    normal2: 'normal2',\n    normal3: 'normal3',\n    normal4: 'normal4',\n    normal5: 'normal5',\n    normal6: 'normal6',\n    normal7: 'normal7',\n    wide1: 'wide1',\n    wide2: 'wide2',\n    wide3: 'wide3',\n    wide4: 'wide4',\n    wide5: 'wide5',\n    wide6: 'wide6',\n    wide7: 'wide7',\n    wide8: 'wide8',\n    wide9: 'wide9',\n    wide10: 'wide10',\n    wide11: 'wide11'\n};\nconst Paging = {\n    leading: 'leading',\n    centered: 'centered',\n    none: ''\n};\nconst Orientation = {\n    horizontal: 'horizontal',\n    vertical: 'vertical'\n};\n\nfunction Search ( request, extra, separator, javascriptConfig, output ) {\n    this.request = request;\n    this.extra = extra;\n    this.separator = separator;\n    this.javascriptConfig = javascriptConfig;\n    this.output = output;\n}\n\nfunction ModuleRequest ( url, method, headers, httpBody ) {\n    this.url = url;\n    this.method = method;\n    this.headers = headers;\n    this.httpBody = httpBody;\n}\n\nfunction Extra ( commands, extraInfo ) {\n    this.commands = commands;\n    this.extraInfo = extraInfo;\n}\n\nfunction Commands ( commandName, params ) {\n    this.commandName = commandName;\n    this.params = params;\n}\n\nfunction JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n    this.removeJavascript = removeJavascript;\n    this.loadInWebView = loadInWebView;\n    this.javaScript = javaScript;\n}\n\nfunction KeyValue ( key, value ) {\n    this.key = key;\n    this.value = value;\n}\n\nfunction Output ( cellDesing, orientation, defaultLayout, paging, section, layout, data ) {\n    this.cellDesing = cellDesing;\n    this.orientation = orientation;\n    this.defaultLayout = defaultLayout;\n    this.paging = paging;\n    this.section = section;\n    this.layout = layout;\n    this.data = data;\n}\n\nfunction Section ( sectionName, separator ) {\n    this.sectionName = sectionName;\n    this.separator = separator;\n}\n\nfunction Layout ( insets, visibleCellsWidthS, visibleCellsWidthM, visibleCellsWidthL, visibleCellsHeight, heightForVisibleCells, cellSize, ratio, constant, horizontalSpacing, verticalSpacing ) {\n    this.insets = insets;\n    this.visibleCellsWidthS = visibleCellsWidthS;\n    this.visibleCellsWidthM = visibleCellsWidthM;\n    this.visibleCellsWidthL = visibleCellsWidthL;\n    this.visibleCellsHeight = visibleCellsHeight;\n    this.heightForVisibleCells = heightForVisibleCells;\n    this.cellSize = cellSize;\n    this.ratio = ratio;\n    this.constant = constant;\n    this.horizontalSpacing = horizontalSpacing;\n    this.verticalSpacing = verticalSpacing;\n}\n\nfunction Insets ( top, bottom, left, right ) {\n    this.top = top;\n    this.bottom = bottom;\n    this.left = left;\n    this.right = right;\n}\n\nfunction Size ( width, height ) {\n    this.width = width;\n    this.height = height;\n}\n\nfunction Ratio ( inRelation, number1, number2 ) {\n    this.inRelation = inRelation;\n    this.number1 = number1;\n    this.number2 = number2;\n}\n\nfunction Data ( image, title, description, field1, field2, field3, field4, isChapter, link, openInWebView ) {\n    this.image = image;\n    this.title = title;\n    this.description = description;\n    this.field1 = field1;\n    this.field2 = field2;\n    this.field3 = field3;\n    this.field4 = field4;\n    this.isChapter = isChapter;\n    this.link = link;\n    this.openInWebView = openInWebView;\n}\n\nfunction quickData ( link, image, title, field1 ) {\n    return new Data( image, title, 'unknown', field1, 'unknown', 'unknown', 'unknown', false, link, false );\n}\n\nfunction shuffle ( a ) {\n    var j, x, i;\n    for ( i = a.length - 1; i > 0; i-- ) {\n            j = Math.floor( Math.random( ) * ( i + 1 ) );\n            x = a[ i ];\n            a[ i ] = a[ j ];\n            a[ j ] = x;\n    }\n    return a;\n}\nvar savedData = document.getElementById( 'ketsu-final-data' );\nvar parsedJson = JSON.parse( savedData.innerHTML );\nlet output = [ ];\nlet emptyKeyValue = [ new KeyValue( '', '' ) ];\nlet nextRequest = '';\nlet searchArray = [ ];\nif ( !parsedJson.request.url.split( 'keyword=' )[ 1 ].includes( 'random' ) ) {\n    let shorts = document.querySelectorAll( '.film_list-wrap .flw-item' );\n    for ( let short of shorts ) {\n            let image = short.querySelector( 'img' ).dataset.src;\n            image = new ModuleRequest( image, 'get', emptyKeyValue, null );\n            let title = short.querySelector( 'img' ).alt;\n            let nbEp = '';\n            let nbEpDub = '';\n            if (short.querySelector( '.tick-item.tick-eps' ) != null) {\n                nbEpDub = short.querySelector( '.tick-item.tick-eps' ).textContent.trim();\n            }\n            if(short.querySelector( '.tick-item.tick-sub' ) != null){\n                nbEp = short.querySelector( '.tick-item.tick-sub' ).textContent.trim();\n            }\n            let type = '';\n            let field1 = '';\n            if (nbEpDub != '') {\n                field1 = nbEp + ' subbed episodes | ' + nbEpDub + ' dubbed episodes';\n                type = 'SUB/DUB'\n            } else if(nbEpDub == '') {\n                field1 = nbEp;\n                if(parseInt(nbEp) > 1 ){\n                  field1 += ' episodes'\n                } else {\n                  field1 += ' episode';\n                }\n                type = 'SUB'\n            } else {\n                field1 = nbEpDub;\n                if(parseInt(nbEpDub) > 1 ){\n                    field1 += ' Episodes'\n                  } else {\n                    field1 += ' Episode';\n                  }\n                type = 'DUB'\n            }\n            let link = 'https://hianime.to' + short.querySelector( 'a' ).href.replace('/watch','');\n            link = new ModuleRequest( link, 'get', emptyKeyValue, null );\n            searchArray.push( new Data( image, title,field1 + ' ' + type , '', type, '', '', false, link ) );\n    }\n    var testLayout = new Layout( new Insets( 10, 10, 10, 10 ), 1, 2, 3, 1, 500, new Size( 400, 400 ), new Ratio( 'width', 4, 11 ), new Size( 0, 0 ), 10, 10 );\n    output.push( new Output( CellDesings.wide8, Orientation.vertical, DefaultLayouts.none, Paging.none, new Section( '', true ), testLayout, searchArray ) );\n} else {\n    nextRequest = 'https://hianime.to/random';\n}\nconsole.log(output)\nlet searchPageObject = new Search( new ModuleRequest( nextRequest, 'get', emptyKeyValue, null ), new Extra( [ new Commands( '', emptyKeyValue ) ], emptyKeyValue ), '', new JavascriptConfig( true, false, '' ), output );\nvar finalJson = JSON.stringify( searchPageObject );\nsavedData.innerHTML = finalJson;\n        window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');     /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "},"output":[{"cellDesing":"normal1","orientation":"vertical","defaultLayout":"wide","paging":"","section":{"sectionName":"","separator":false},"layout":{"insets":{"top":0,"bottom":0,"left":0,"right":0},"visibleCellsWidthS":2,"visibleCellsWidthM":2,"visibleCellsWidthL":2,"visibleCellsHeight":2,"heightForVisibleCells":400,"cellSize":{"width":300,"height":300},"ratio":{"inRelation":"width","number1":1,"number2":2},"constant":{"width":1,"height":2},"horizontalSpacing":0,"verticalSpacing":0},"data":[{"image":{"url":"","method":"get","headers":[{"key":"","value":""}],"httpBody":null},"title":"","description":"","field1":"","field2":"","field3":"","field4":"","openInWebView":false,"isChapter":false,"link":{"url":"empty","method":"get","headers":[{"key":"key","value":"value"}],"httpBody":null}}]}],"moduleCreatorIdZMfmBQNHwOWXVUqQQHeN":{"path":"bgsng","id":"search,0cell","sectionsHidden":[],"options":{"name":"Request"},"cellsHidden":false,"openedRequestMenu":"Headers","openedMenu":"Javascript","javascriptEditorScroll":204,"async":true}},{"request":{"url":"","method":"get","headers":[{"key":"","value":"","moduleCreatorHeaderisActive":true}]},"separator":"%20","extra":{"commands":[{"commandName":"","params":[{"key":"","value":""}]}],"extraInfo":[{"key":"","value":""}]},"javascriptConfig":{"removeJavascript":false,"loadInWebView":false,"javaScript":"\n        try {\n\n             \n\n        var KETSU_ASYNC = true;\n        \n        /* JAVASCRIPT STARTS */               const DefaultLayouts = {\n          ultraWideFull: 'ultraWideFull',\n          ultraWide: 'ultraWide',\n          wideFull: 'wideFull',\n          wide: 'wide',\n          wideStrechedFull: 'wideStrechedFull',\n          wideStrechedFullDouble: 'WideStrechedFullDouble',\n          wideStreched: 'wideStreched',\n          wideStrechedDouble: 'wideStrechedDouble',\n          wideStrechedFullList: 'wideStrechedFullList',\n          wideStrechedList: 'wideStrechedList',\n          doublets: 'doublets',\n          doubletsDouble: 'doubletsDouble',\n          doubletsFull: 'doubletsFull',\n          doubletsFullDouble: 'doubletsFullDouble',\n          doubletsConstant: 'doubletsConstant',\n          doubletsDoubleConstant: 'doubletsDoubleConstant',\n          doubletsFullConstant: 'doubletsFullConstant',\n          doubletsFullDoubleConstant: 'doubletsFullDoubleConstant',\n          longDoublets: 'longDoublets',\n          longDoubletsDouble: 'longDoubletsDouble',\n          longDoubletsFull: 'longDoubletsFull',\n          longDoubletsFullDouble: 'longDoubletsFullDouble',\n          longDoubletsConstant: 'longDoubletsConstant',\n          longDoubletsDoubleConstant: 'longDoubletsDoubleConstant',\n          longDoubletsFullConstant: 'longDoubletsFullConstant',\n          longDoubletsFullDoubleConstant: 'longDoubletsFullDoubleConstant',\n          triplets: 'triplets',\n          tripletsDouble: 'tripletsDouble',\n          tripletsFull: 'tripletsFull',\n          tripletsFullDouble: 'tripletsFullDouble',\n          tripletsConstant: 'tripletsConstant',\n          tripletsDoubleConstant: 'tripletsDoubleConstant',\n          tripletsFullConstant: 'tripletsFullConstant',\n          tripletsFullDoubleConstant: 'tripletsFullDoubleConstant',\n          longTriplets: 'longTriplets',\n          longTripletsDouble: 'longTripletsDouble',\n          longTripletsFull: 'longTripletsFull',\n          longTripletsFullDouble: 'longTripletsFullDouble',\n          longTripletsConstant: 'longTripletsConstant',\n          longTripletsDoubleConstant: 'longTripletsDoubleConstant',\n          longTripletsFullConstant: 'longTripletsFullConstant',\n          longTripletsFullDoubleConstant: 'longTripletsFullDoubleConstant',\n          none: ''\n  };\n  const CellDesings = {\n          Special1: 'Special1',\n          Special2: 'Special2',\n          Special3: 'Special3',\n          CELLHelperText: 'CELLHelperText',\n          small1: 'small1',\n          small2: 'small2',\n          normal1: 'normal1',\n          normal2: 'normal2',\n          normal3: 'normal3',\n          normal4: 'normal4',\n          normal5: 'normal5',\n          normal6: 'normal6',\n          normal7: 'normal7',\n          wide1: 'wide1',\n          wide2: 'wide2',\n          wide3: 'wide3',\n          wide4: 'wide4',\n          wide5: 'wide5',\n          wide6: 'wide6',\n          wide7: 'wide7',\n          wide8: 'wide8',\n          wide9: 'wide9',\n          wide10: 'wide10',\n          wide11: 'wide11'\n  };\n  const Paging = {\n          leading: 'leading',\n          centered: 'centered',\n          none: ''\n  };\n  const Orientation = {\n          horizontal: 'horizontal',\n          vertical: 'vertical'\n  };\n\n  function Search ( request, extra, separator, javascriptConfig, output ) {\n          this.request = request;\n          this.extra = extra;\n          this.separator = separator;\n          this.javascriptConfig = javascriptConfig;\n          this.output = output;\n  }\n\n  function ModuleRequest ( url, method, headers, httpBody ) {\n          this.url = url;\n          this.method = method;\n          this.headers = headers;\n          this.httpBody = httpBody;\n  }\n\n  function Extra ( commands, extraInfo ) {\n          this.commands = commands;\n          this.extraInfo = extraInfo;\n  }\n\n  function Commands ( commandName, params ) {\n          this.commandName = commandName;\n          this.params = params;\n  }\n\n  function JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n          this.removeJavascript = removeJavascript;\n          this.loadInWebView = loadInWebView;\n          this.javaScript = javaScript;\n  }\n\n  function KeyValue ( key, value ) {\n          this.key = key;\n          this.value = value;\n  }\n\n  function Output ( cellDesing, orientation, defaultLayout, paging, section, layout, data ) {\n          this.cellDesing = cellDesing;\n          this.orientation = orientation;\n          this.defaultLayout = defaultLayout;\n          this.paging = paging;\n          this.section = section;\n          this.layout = layout;\n          this.data = data;\n  }\n\n  function Section ( sectionName, separator ) {\n          this.sectionName = sectionName;\n          this.separator = separator;\n  }\n\n  function Layout ( insets, visibleCellsWidthS, visibleCellsWidthM, visibleCellsWidthL, visibleCellsHeight, heightForVisibleCells, cellSize, ratio, constant, horizontalSpacing, verticalSpacing ) {\n          this.insets = insets;\n          this.visibleCellsWidthS = visibleCellsWidthS;\n          this.visibleCellsWidthM = visibleCellsWidthM;\n          this.visibleCellsWidthL = visibleCellsWidthL;\n          this.visibleCellsHeight = visibleCellsHeight;\n          this.heightForVisibleCells = heightForVisibleCells;\n          this.cellSize = cellSize;\n          this.ratio = ratio;\n          this.constant = constant;\n          this.horizontalSpacing = horizontalSpacing;\n          this.verticalSpacing = verticalSpacing;\n  }\n\n  function Insets ( top, bottom, left, right ) {\n          this.top = top;\n          this.bottom = bottom;\n          this.left = left;\n          this.right = right;\n  }\n\n  function Size ( width, height ) {\n          this.width = width;\n          this.height = height;\n  }\n\n  function Ratio ( inRelation, number1, number2 ) {\n          this.inRelation = inRelation;\n          this.number1 = number1;\n          this.number2 = number2;\n  }\n\n  function Data ( image, title, description, field1, field2, field3, field4, isChapter, link, openInWebView ) {\n          this.image = image;\n          this.title = title;\n          this.description = description;\n          this.field1 = field1;\n          this.field2 = field2;\n          this.field3 = field3;\n          this.field4 = field4;\n          this.isChapter = isChapter;\n          this.link = link;\n          this.openInWebView = openInWebView;\n  }\n\n  function quickData ( link, image, title, field1 ) {\n          return new Data( image, title, 'unknown', field1, 'unknown', 'unknown', 'unknown', false, link );\n  }\n\n  function shuffle ( a ) {\n          var j, x, i;\n          for ( i = a.length - 1; i > 0; i-- ) {\n                  j = Math.floor( Math.random( ) * ( i + 1 ) );\n                  x = a[ i ];\n                  a[ i ] = a[ j ];\n                  a[ j ] = x;\n          }\n          return a;\n  }\n  var savedData = document.getElementById( 'ketsu-final-data' );\n  var parsedJson = JSON.parse( savedData.innerHTML );\n  let output = [ ];\n  let emptyKeyValue = [ new KeyValue( '', '' ) ];\n  var anime = [ ];\n  var image = document.querySelector( '.film-poster img' ).src;\n  image = new ModuleRequest( image, 'get', emptyKeyValue, null );\n  if ( document.querySelector( '.anisc-detail h2' ).textContent != document.querySelector( '.anisc-detail h2' ).dataset.jname ) {\n          var title = document.querySelector( '.anisc-detail h2' ).textContent + '/' + document.querySelector( '.anisc-detail h2' ).dataset.jname\n  } else {\n          var title = document.querySelector( '.anisc-detail h2' ).dataset.jname\n  };\n  var desc = '';\n  try {\n          desc = document.querySelector( '.text' ).innerText.replaceAll( '\\n', ' ' ).trim( ).replaceAll( '\\n', ' ' ).trim( );\n  } catch {\n          desc = document.querySelector( '.text' ).innerText.trim( );\n  }\n  var link = 'https://hianime.to' + document.querySelector( '.btn.btn-radius.btn-primary.btn-play' ).href.replace( '/watch', '' );\n  link = new ModuleRequest( link, 'get', emptyKeyValue, null );\n  try {\n          var field1 = document.querySelector( '#ani_detail > div > div > div.anis-content > div.anisc-detail > div.film-stats' ).innerText.trim( ).replaceAll( '\\n', ' ' )\n  } catch ( e ) {\n          var field1 = document.querySelector( '#ani_detail > div > div > div.anis-content > div.anisc-detail > div.film-stats' ).innerText.trim( )\n  };\n  if ( field1.includes( 'TV' ) ) {\n          var field2 = 'TV';\n  } else if ( field1.includes( 'Movie' ) ) {\n          var field2 = 'Movie'\n  } else {\n          var field2 = 'Unknown'\n  };\n  anime.push( new Data( image, title, desc, field1, field2, '', '', false, link, false ) );\n  output.push( new Output( CellDesings.wide11, Orientation.horizontal, DefaultLayouts.wideFull, Paging.leading, new Section( '', true ), null, anime ) );;\n  let searchPageObject = new Search( new ModuleRequest( '', 'get', emptyKeyValue, null ), new Extra( [ new Commands( '', emptyKeyValue ) ], emptyKeyValue ), '', new JavascriptConfig( true, false, '' ), output );\n  var finalJson = JSON.stringify( searchPageObject );\n  savedData.innerHTML = finalJson;\n        window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');     /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "},"output":[{"cellDesing":"normal1","orientation":"vertical","defaultLayout":"wide","paging":"","section":{"sectionName":"","separator":false},"layout":{"insets":{"top":0,"bottom":0,"left":0,"right":0},"visibleCellsWidthS":2,"visibleCellsWidthM":2,"visibleCellsWidthL":2,"visibleCellsHeight":2,"heightForVisibleCells":400,"cellSize":{"width":300,"height":300},"ratio":{"inRelation":"width","number1":1,"number2":2},"constant":{"width":1,"height":2},"horizontalSpacing":0,"verticalSpacing":0},"data":[{"image":{"url":"","method":"get","headers":[{"key":"","value":""}],"httpBody":null},"title":"","description":"","field1":"","field2":"","field3":"","field4":"","openInWebView":false,"isChapter":false,"link":{"url":"empty","method":"get","headers":[{"key":"key","value":"value"}],"httpBody":null}}]}],"moduleCreatorIdKzVDRbAVYhFdvJIWMRzu":{"path":"xgalJ","id":"search,1cell","sectionsHidden":[],"options":{"name":"Request"},"cellsHidden":false,"javascriptEditorScroll":219,"openedMenu":"Javascript","async":true}}],"info":[{"request":{"url":"https://hianime.to/classroom-for-heroes-18485","method":"get","headers":[{"key":"","value":"","moduleCreatorHeaderisActive":true}]},"extra":{"commands":[{"commandName":"","params":[{"key":"","value":""}]}],"extraInfo":[{"key":"","value":""}]},"javascriptConfig":{"removeJavascript":true,"loadInWebView":false,"javaScript":"\n        try {\n\n             \n\n        var KETSU_ASYNC = true;\n        \n        /* JAVASCRIPT STARTS */               function Info ( request, extra, javascriptConfig, output ) {\n              this.request = request;\n              this.extra = extra;\n              this.javascriptConfig = javascriptConfig;\n              this.output = output;\n      }\n\n      function ModuleRequest ( url, method, headers, httpBody ) {\n              this.url = url;\n              this.method = method;\n              this.headers = headers;\n              this.httpBody = httpBody;\n      }\n\n      function Extra ( commands, extraInfo ) {\n              this.commands = commands;\n              this.extraInfo = extraInfo;\n      }\n\n      function Commands ( commandName, params ) {\n              this.commandName = commandName;\n              this.params = params;\n      }\n\n      function JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n              this.removeJavascript = removeJavascript;\n              this.loadInWebView = loadInWebView;\n              this.javaScript = javaScript;\n      }\n\n      function KeyValue ( key, value ) {\n              this.key = key;\n              this.value = value;\n      }\n\n      function Chapter ( chapName, link, openInWebView ) {\n              this.chapName = chapName;\n              this.link = link;\n              this.openInWebView = openInWebView;\n      }\n\n      function Output ( image, title, link, description, genres, field1, field2, field3, field4, chapters ) {\n              this.image = image;\n              this.link = link;\n              this.title = title;\n              this.description = description;\n              this.genres = genres;\n              this.field1 = field1;\n              this.field2 = field2;\n              this.field3 = field3;\n              this.field4 = field4;\n              this.chapters = chapters;\n      }\n      var savedData = document.getElementById( 'ketsu-final-data' ) || document.body.querySelector('div');\n      var parsedJson = JSON.parse( savedData.innerHTML );\n      let emptyKeyValue = [ new KeyValue( 'Referer', parsedJson.request.url ), new KeyValue( 'X-Requested-With', 'XMLHttpRequest' ) ];\n      var airing;\n      var status;\n      var image = document.querySelector( '.film-poster img' ).src;\n      image = new ModuleRequest( image, 'get', emptyKeyValue, null );\n      if ( document.querySelector( '.anisc-detail h2' ).textContent != document.querySelector( '.anisc-detail h2' ).dataset.jname ) {\n              var title = document.querySelector( '.anisc-detail h2' ).textContent + '/' + document.querySelector( '.anisc-detail h2' ).dataset.jname\n      } else {\n              var title = document.querySelector( '.anisc-detail h2' ).dataset.jname\n      };\n      var desc = '';\n      try {\n              desc = document.querySelector( 'div.anis-content > div.anisc-detail > div.film-depion.m-hide > div' ).textContent.trim( );\n      } catch ( e ) {\n              desc = document.querySelector( '.anisc-info' ).textContent.trim( );\n      }\n      var animeinfo = document.querySelector( 'div.anisc-info-wrap > div.anisc-info' );\n      for ( var x = 0; x < animeinfo.children.length; x++ ) {\n              if ( animeinfo.children[ x ].textContent.trim( ).includes( 'Status' ) ) {\n                      var status = animeinfo.children[ x ].textContent.split( 'Status:' )[ 1 ].trim( );\n              } else if ( animeinfo.children[ x ].textContent.trim( ).includes( 'Aired' ) ) {\n                      var airing = animeinfo.children[ x ].textContent.split( 'Aired:' )[ 1 ].trim( );\n              }\n      }\n      var genres = Array.from( document.querySelectorAll( '.item.item-list a' ) ).map( g => g.textContent );\n      var type = 'Anime';\n      var episodes = [ ];\n      var json = document.querySelector( '#wrapper' ).dataset.id;\n      var nextRequest = `https://hianime.to/ajax/v2/episode/list/${json}`;\n      let infoPageObject = new Info( new ModuleRequest( nextRequest, 'get', emptyKeyValue, null ), new Extra( [ new Commands( '', emptyKeyValue ) ], emptyKeyValue ), new JavascriptConfig( false, false, '' ), new Output( image, title, parsedJson.request, desc, genres, status, airing, type, 'Eps: ' + episodes.length, episodes ) );\n      var finalJson = JSON.stringify( infoPageObject );\n      savedData.innerHTML = finalJson;\n    window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');     /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "},"output":{"image":{"url":"","method":"get","headers":[{"key":"","value":""}],"httpBody":null},"link":{"url":"","method":"get","headers":[{"key":"","value":""}],"httpBody":null},"title":"","description":"","genres":[""],"field1":"","field2":"","field3":"","field4":"","chapters":[{"chapName":"","openInWebView":false,"link":{"url":"empty","method":"get","headers":[{"key":"key","value":"value"}],"httpBody":null}}]},"moduleCreatorIdBtXsgUTzQtrjucgCwhKf":{"path":"wKPvZ","id":"info,0cell","sectionsHidden":[],"options":{"name":"Request"},"cellsHidden":false,"openedMenu":"Javascript","javascriptEditorScroll":88,"async":true}},{"request":{"url":"","method":"get","headers":[{"key":"","value":"","moduleCreatorHeaderisActive":true}]},"extra":{"commands":[{"commandName":"","params":[{"key":"","value":""}]}],"extraInfo":[{"key":"","value":""}]},"javascriptConfig":{"removeJavascript":false,"loadInWebView":false,"javaScript":"\n        try {\n\n             \n\n        var KETSU_ASYNC = true;\n        \n        /* JAVASCRIPT STARTS */              function Info ( request, extra, javascriptConfig, output ) {\n             this.request = request;\n             this.extra = extra;\n             this.javascriptConfig = javascriptConfig;\n             this.output = output;\n     }\n\n     function ModuleRequest ( url, method, headers, httpBody ) {\n             this.url = url;\n             this.method = method;\n             this.headers = headers;\n             this.httpBody = httpBody;\n     }\n\n     function Extra ( commands, extraInfo ) {\n             this.commands = commands;\n             this.extraInfo = extraInfo;\n     }\n\n     function Commands ( commandName, params ) {\n             this.commandName = commandName;\n             this.params = params;\n     }\n\n     function JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n             this.removeJavascript = removeJavascript;\n             this.loadInWebView = loadInWebView;\n             this.javaScript = javaScript;\n     }\n\n     function KeyValue ( key, value ) {\n             this.key = key;\n             this.value = value;\n     }\n\n     function Chapter ( chapName, link, openInWebView ) {\n             this.chapName = chapName;\n             this.link = link;\n             this.openInWebView = openInWebView;\n     }\n\n     function Output ( image, title, link, description, genres, field1, field2, field3, field4, chapters ) {\n             this.image = image;\n             this.link = link;\n             this.title = title;\n             this.description = description;\n             this.genres = genres;\n             this.field1 = field1;\n             this.field2 = field2;\n             this.field3 = field3;\n             this.field4 = field4;\n             this.chapters = chapters;\n     }\n     var savedData = document.getElementById( 'ketsu-final-data' ) || document.body.querySelector('div');\n     var parsedJson = JSON.parse( savedData.innerText );\n     let emptyKeyValue = [ new KeyValue( 'Referer', 'https://hianime.to/' ), new KeyValue( 'X-Requested-With', 'XMLHttpRequest' ) ];\n     var image = parsedJson.output.image;\n     var title = parsedJson.output.title;\n     var desc = parsedJson.output.description;\n     var genres = parsedJson.output.genres;\n     var type = '';\n     var episodes = [ ];\n     var script = document.querySelector( 'script' ).innerText.replace( '*/', '' ).replace( '/*', '' );\n     var html = JSON.parse( script ).html;\n     var parser = new DOMParser( );\n     var doc = parser.parseFromString( html, 'text/html' );\n     var animes = doc.querySelectorAll( '.ss-list a' );\n     for ( var x = 0; x < animes.length; x++ ) {\n             var anime = animes[ x ];\n             var link = 'https://hianime.to/ajax/v2/episode/servers?episodeId=' + anime.dataset.id;\n             var name = anime.title;\n             if ( !name.includes( 'Episode' ) ) {\n                     name = `${x+1} : ` + name;\n             }\n             let chapter = new Chapter( name, new ModuleRequest( link, 'get', emptyKeyValue, null ), false );\n             episodes.push( chapter );\n     }\n     parsedJson.request.url = parsedJson.output.link.url;\n     parsedJson.request.headers = [ new KeyValue( '', '' ) ];\n     let infoPageObject = new Info( new ModuleRequest( '', '', emptyKeyValue, null ), new Extra( [ new Commands( '', emptyKeyValue ) ], emptyKeyValue ), new JavascriptConfig( false, false, '' ), new Output( image, title, parsedJson.request, desc, genres, parsedJson.output.field1, parsedJson.output.field2, type, 'Eps: ' + episodes.length, episodes ) );\n     var finalJson = JSON.stringify( infoPageObject );\n     savedData.innerText = finalJson;\n    window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');     /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "},"output":{"image":{"url":"","method":"get","headers":[{"key":"","value":""}],"httpBody":null},"link":{"url":"","method":"get","headers":[{"key":"","value":""}],"httpBody":null},"title":"","description":"","genres":[""],"field1":"","field2":"","field3":"","field4":"","chapters":[{"chapName":"","openInWebView":false,"link":{"url":"empty","method":"get","headers":[{"key":"key","value":"value"}],"httpBody":null}}]},"moduleCreatorIdVfFgzzOkPmGlLojnLBWZ":{"path":"FXVvF","id":"info,1cell","sectionsHidden":[],"options":{"name":"Request"},"cellsHidden":false,"javascriptEditorScroll":83,"openedMenu":"Javascript","async":true}}],"chapters":[{"request":{"url":"https://hianime.to/ajax/v2/episode/servers?episodeId=103008","method":"get","headers":[{"key":"key","value":"value","moduleCreatorHeaderisActive":true},{"key":"","value":"","moduleCreatorHeaderisActive":true}]},"extra":{"commands":[{"commandName":"","params":[{"key":"","value":""}]}],"extraInfo":[{"key":"","value":""}]},"javascriptConfig":{"removeJavascript":true,"loadInWebView":false,"javaScript":"\n        try {\n\n             \n\n        var KETSU_ASYNC = true;\n        \n        /* JAVASCRIPT STARTS */               function Chapters ( request, extra, javascriptConfig, output ) {\n              this.request = request;\n              this.extra = extra;\n              this.javascriptConfig = javascriptConfig;\n              this.output = output;\n      }\n\n      function ModuleRequest ( url, method, headers, httpBody ) {\n              this.url = url;\n              this.method = method;\n              this.headers = headers;\n              this.httpBody = httpBody;\n      }\n\n      function Extra ( commands, extraInfo ) {\n              this.commands = commands;\n              this.extraInfo = extraInfo;\n      }\n\n      function Commands ( commandName, params ) {\n              this.commandName = commandName;\n              this.params = params;\n      }\n\n      function JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n              this.removeJavascript = removeJavascript;\n              this.loadInWebView = loadInWebView;\n              this.javaScript = javaScript;\n      }\n\n      function KeyValue ( key, value ) {\n              this.key = key;\n              this.value = value;\n      }\n\n      function Output ( videos, images, text ) {\n              this.videos = videos;\n              this.images = images;\n              this.text = text;\n      }\n\n      function Videos ( needsResolver, rawVideo ) {\n              this.needsResolver = needsResolver;\n              this.rawVideo = rawVideo;\n      }\n\n      function NeedsResolver ( resolverIdentifier, link ) {\n              this.resolverIdentifier = resolverIdentifier;\n              this.link = link;\n      }\n\n      function RawVideo ( video ) {\n              this.video = video;\n      }\n\n      function Video ( videoQuality, videoLink ) {\n              this.videoQuality = videoQuality;\n              this.videoLink = videoLink;\n      }\n      var savedData = document.getElementById( 'ketsu-final-data' );\n      var parsedJson = JSON.parse( savedData.innerHTML );\n      var extraInfo = parsedJson.extra.extraInfo;\n      var emptyKeyValue = [ new KeyValue( 'X-Requested-With', 'XMLHttpRequest' ) ];\n      var output = [ ];\n      const script = document.querySelector( 'script' ).innerHTML.replace( '/*', '' ).replace( '*/', '' );\n      const data = JSON.parse( script );\n      const html = data.html;\n      const htmlObject = document.createElement( 'div' );\n      htmlObject.innerHTML = html;\n      document.body.appendChild( htmlObject );\n      var extraInfo = [ new KeyValue( 'count', '0' ) ];\n      var links = document.querySelectorAll( '.item.server-item' );\n      for ( var x = 0; x < links.length; x++ ) {\n              var link = links[ x ];\n              var id = link.dataset.id;\n              var lang = link.dataset.type;\n              var url = 'https://hianime.to/ajax/v2/episode/sources?id=' + id + '&lang=' + lang;\n              if ( x == 0 ) {\n                      var nextRequest = url\n              } else {\n                      extraInfo.push( new KeyValue( `${x}`, `${url}` ) );\n              }\n              console.log( url );\n      }\n      let emptyExtra = new Extra( [ new Commands( '', emptyKeyValue ) ], extraInfo );\n      var chaptersObject = new Chapters( new ModuleRequest( nextRequest, 'get', emptyKeyValue, null ), emptyExtra, new JavascriptConfig( false, false, '' ), new Output( new Videos( [ ], [ ] ), null, null ) );\n      var finalJson = JSON.stringify( chaptersObject );\n      savedData.innerHTML = finalJson;\n    window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');     /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "},"output":{"videos":{"needsResolver":[{"resolverIdentifier":"","link":{"url":"","method":"get","headers":[{"key":"key","value":"value"}],"httpBody":null}}],"rawVideo":[{"video":[{"videoQuality":"","videoLink":{"url":"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4","method":"get","headers":[{"key":"key","value":"value"}],"httpBody":null}}]}]},"images":[{"url":"empty","method":"get","headers":[{"key":"key","value":"value"}],"httpBody":null}],"text":{"text":""}},"moduleCreatorIdAcLPCPhyMLVrzKJkKJpm":{"path":"vcHHY","id":"chapters,0cell","sectionsHidden":[],"options":{"name":"Request"},"cellsHidden":false,"javascriptEditorScroll":26,"openedMenu":"Javascript","async":true}},{"request":{"url":"","method":"get","headers":[{"key":"key","value":"value","moduleCreatorHeaderisActive":true},{"key":"","value":"","moduleCreatorHeaderisActive":true}]},"extra":{"commands":[{"commandName":"","params":[{"key":"","value":""}]}],"extraInfo":[{"key":"","value":""}]},"javascriptConfig":{"removeJavascript":false,"loadInWebView":false,"javaScript":"\n        try {\n\n             \n\n        var KETSU_ASYNC = true;\n        \n        /* JAVASCRIPT STARTS */              function Chapters ( request, extra, javascriptConfig, output ) {\n             this.request = request;\n             this.extra = extra;\n             this.javascriptConfig = javascriptConfig;\n             this.output = output;\n     }\n\n     function ModuleRequest ( url, method, headers, httpBody ) {\n             this.url = url;\n             this.method = method;\n             this.headers = headers;\n             this.httpBody = httpBody;\n     }\n\n     function Extra ( commands, extraInfo ) {\n             this.commands = commands;\n             this.extraInfo = extraInfo;\n     }\n\n     function Commands ( commandName, params ) {\n             this.commandName = commandName;\n             this.params = params;\n     }\n\n     function JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n             this.removeJavascript = removeJavascript;\n             this.loadInWebView = loadInWebView;\n             this.javaScript = javaScript;\n     }\n\n     function KeyValue ( key, value ) {\n             this.key = key;\n             this.value = value;\n     }\n\n     function Output ( videos, images, text ) {\n             this.videos = videos;\n             this.images = images;\n             this.text = text;\n     }\n\n     function Videos ( needsResolver, rawVideo ) {\n             this.needsResolver = needsResolver;\n             this.rawVideo = rawVideo;\n     }\n\n     function NeedsResolver ( resolverIdentifier, link ) {\n             this.resolverIdentifier = resolverIdentifier;\n             this.link = link;\n     }\n\n     function RawVideo ( video ) {\n             this.video = video;\n     }\n\n     function Video ( videoQuality, videoLink ) {\n             this.videoQuality = videoQuality;\n             this.videoLink = videoLink;\n     }\n\n     function getValueFromKey ( keys, key ) {\n             for ( var x = 0; x < keys.length; x++ ) {\n                     let tKey = keys[ x ];\n                     if ( tKey.key == key ) {\n                             return tKey.value;\n                     }\n             }\n     }\n     var savedData = document.getElementById( 'ketsu-final-data' );\n     var parsedJson = JSON.parse( savedData.innerHTML );\n     var extraInfo = parsedJson.extra.extraInfo;\n     var emptyKeyValue = [ new KeyValue( 'X-Requested-With', 'XMLHttpRequest' ) ];\n     var emptyHeader = [ new KeyValue( 'Referer', 'https://hianime.to/' ) ];\n     var output = parsedJson.output.videos;;\n     var actualCount = getValueFromKey( extraInfo, 'count' );\n     var nextCount = parseInt( actualCount.match( /\\d+/g )[ 0 ] ) + 1;\n     var nextRequest = getValueFromKey( extraInfo, nextCount );\n     if ( actualCount == 0 ) {\n             output = new Videos( [ ], [ ] );\n     }\n     const script = document.querySelector( 'script' ).innerHTML.replace( '/*', '' ).replace( '*/', '' );\n     const data = JSON.parse( script );\n     data.link = data.link.replace( '?vast=1', '' );\n     if ( data.link.includes( 'streamtape.com' ) ) {\n             var fixedLink = data.link.replace( 'https://streamtape.com/', 'https://streamta.pe/' );\n             if ( parsedJson.request.url.includes( 'lang=dub' ) ) {\n                     output.needsResolver.push( new NeedsResolver( 'STREAMTA DUB', new ModuleRequest( fixedLink, 'get', emptyHeader, null ) ) );\n             } else {\n                     output.needsResolver.push( new NeedsResolver( '', new ModuleRequest( fixedLink, 'get', emptyHeader, null ) ) );\n             }\n     }\n     if ( parsedJson.request.url.includes( 'lang=dub' ) && !data.link.includes( 'streamtape.com' ) ) {\n             resolver = data.link.split( '/' )[ 2 ].split( '.' )[ 0 ].toUpperCase( );\n             output.needsResolver.push( new NeedsResolver( resolver + ' DUB', new ModuleRequest( data.link, 'get', emptyHeader, null ) ) );\n     } else if ( data.link.includes( 'streamtape' ) ) {} else {\n             output.needsResolver.push( new NeedsResolver( '', new ModuleRequest( data.link, 'get', emptyHeader, null ) ) );\n     }\n     extraInfo[ 0 ].value = '' + ( parseInt( actualCount ) + 1 );\n     if ( nextRequest == undefined ) {\n             nextRequest = '';\n     }\n     let emptyExtra = new Extra( [ new Commands( '', emptyKeyValue ) ], extraInfo );\n     var chaptersObject = new Chapters( new ModuleRequest( nextRequest, 'get', emptyKeyValue, null ), emptyExtra, new JavascriptConfig( false, false, '' ), new Output( output, null, null ) );\n     var finalJson = JSON.stringify( chaptersObject );\n     savedData.innerHTML = finalJson;\n     console.log(output)\n    window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');     /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "},"output":{"videos":{"needsResolver":[{"resolverIdentifier":"","link":{"url":"","method":"get","headers":[{"key":"key","value":"value"}],"httpBody":null}}],"rawVideo":[{"video":[{"videoQuality":"","videoLink":{"url":"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4","method":"get","headers":[{"key":"key","value":"value"}],"httpBody":null}}]}]},"images":[{"url":"empty","method":"get","headers":[{"key":"key","value":"value"}],"httpBody":null}],"text":{"text":""}},"moduleCreatorIdgtjcFnmqqwPJxDmMzrou":{"path":"MbxvY","id":"chapters,1cell","sectionsHidden":[],"options":{"name":"Request"},"cellsHidden":false,"javascriptEditorScroll":42,"openedMenu":"Javascript","async":true}}],"moduleResolvers":[{"resolverInfo":{"resolverName":"STREAMTA","nameMatches":["STREAMTA","STREAMTA DUB"],"developer":"ナビル","moduleID":"8465132120","resolverVersion":1.6,"baseURL":"","moduleCreatorIdzSxRyOiacvfQfzGRfFWr":{"path":"VDQem","id":"moduleResolvers,0,resolverInfosection","sectionsHidden":[],"options":{"name":"Resolver Parameters","listName":"parameters"},"cellsHidden":false},"moduleCreatorIdjvdcuVFPbQzmLlntwbrL":{"path":"THtBv","id":"moduleResolvers,0,resolverInfocell","sectionsHidden":[],"options":{"name":"parameters"},"cellsHidden":false}},"resolver":[{"request":{"url":"empty","method":"get","headers":[{"key":"key","value":"value","moduleCreatorHeaderisActive":true},{"key":"","value":"","moduleCreatorHeaderisActive":true}]},"extra":{"commands":[{"commandName":"","params":[{"key":"","value":""}]}],"extraInfo":[{"key":"","value":""}]},"javascriptConfig":{"removeJavascript":true,"loadInWebView":false,"javaScript":"\n        try {\n\n            /* JAVASCRIPT STARTS */              function Resolver ( request, extra, javascriptConfig, output ) {\n            this.request = request;\n            this.extra = extra;\n            this.javascriptConfig = javascriptConfig;\n            this.output = output;\n    }\n\n    function ModuleRequest ( url, method, headers, httpBody ) {\n            this.url = url;\n            this.method = method;\n            this.headers = headers;\n            this.httpBody = httpBody;\n    }\n\n    function Extra ( commands, extraInfo ) {\n            this.commands = commands;\n            this.extraInfo = extraInfo;\n    }\n\n    function Commands ( commandName, params ) {\n            this.commandName = commandName;\n            this.params = params;\n    }\n\n    function JavascriptConfig ( removeJavascript, loadInWebView, javaScript ) {\n            this.removeJavascript = removeJavascript;\n            this.loadInWebView = loadInWebView;\n            this.javaScript = javaScript;\n    }\n\n    function KeyValue ( key, value ) {\n            this.key = key;\n            this.value = value;\n    }\n\n    function Output ( video ) {\n            this.video = video;\n    }\n\n    function Video ( videoQuality, videoLink ) {\n            this.videoQuality = videoQuality;\n            this.videoLink = videoLink;\n    }\n\n    function getNext ( match, array ) {\n            for ( var x = 0; x < array.length; x++ ) {\n                    let mMatch = array[ x ];\n                    if ( mMatch.includes( match ) ) {\n                            return array[ x + 1 ];\n                    }\n            }\n    }\n    var savedData = document.getElementById( 'ketsu-final-data' );\n    var parsedJson = JSON.parse( savedData.innerHTML );\n    var emptyKeyValue = [ new KeyValue( 'Referer', parsedJson.request.url ) ];\n    var videos = [ ];\n    let playerRegex = /innerHTML\\s=\\s*\"([^\"]+)\"\\s?\\+\\s?''\\+\\s?\\('([^']+)/;\n    let body = document.body.innerText;\n    let playerMatch = playerRegex.exec( body );\n    if ( playerMatch ) {\n            let matchedLink = playerMatch[ 2 ];\n            let index = matchedLink.indexOf( '?' );\n            if ( index == -1 ) {\n                    try {\n                            firstpart = playerMatch[ 1 ].split( '=' )[ 1 ].replace( '\"', '' );\n                            secondpart = playerMatch[ 2 ].substr( 5 );\n                            secondtry = playerMatch[ 2 ].substr( 4 );\n                            let videoLink = 'https://streamta.pe/get_video?id=' + firstpart + secondpart + '&stream=1';\n                            let fixedLink = 'https://streamta.pe/get_video?id=' + firstpart + secondtry + '&stream=1';\n                            console.log( videoLink, fixedLink );\n                            videos.push( new Video( 'THAI GUY WAS HERE', new ModuleRequest( fixedLink, 'get', emptyKeyValue, null ) ) );\n                            videos.push( new Video( 'Normal', new ModuleRequest( videoLink, 'get', emptyKeyValue, null ) ) );\n                    } catch ( e ) {}\n                    try {\n                            if ( matchedLink.match( /^=/ ) ) {\n                                    let videoLink = 'https://streamta.pe/get_video?id=' + matchedLink.substr( 5 ) + '&stream=1';\n                                    if ( videoLink.includes( 'id==' ) ) {\n                                            videoLink = videoLink.replace( 'id==', 'id=' );\n                                    }\n                                    console.log( videoLink );\n                                    videos.push( new Video( 'Normal', new ModuleRequest( videoLink, 'get', emptyKeyValue, null ) ) );\n                            }\n                    } catch ( e ) {}\n                    try {\n                            if ( matchedLink.match( /id=/ ) ) {\n                                    split = matchedLink.split( 'id=' );\n                                    let videoLink = 'https://streamta.pe/get_video?id=' + split[ 1 ] + '&stream=1';\n                                    console.log( videoLink );\n                                    videos.push( new Video( 'Normal', new ModuleRequest( videoLink, 'get', emptyKeyValue, null ) ) );\n                            }\n                    } catch ( e ) {}\n                    try {\n                            if ( matchedLink.match( /^([a-zA-Z]+d=)/ ) ) {\n                                    split = matchedLink.split( 'd=' );\n                                    let videoLink = 'https://streamta.pe/get_video?id=' + split[ 1 ] + '&stream=1';\n                                    console.log( videoLink );\n                                    videos.push( new Video( 'Normal', new ModuleRequest( videoLink, 'get', emptyKeyValue, null ) ) );\n                            }\n                    } catch ( e ) {}\n            } else {\n                    let videoLink = `https://streamta.pe/get_video${matchedLink.substr(index)}&stream=1`;\n                    console.log( videoLink );\n                    videos.push( new Video( 'Normal', new ModuleRequest( videoLink, 'get', emptyKeyValue, null ) ) );\n            }\n    }\n    let emptyExtra = new Extra( [ new Commands( '', emptyKeyValue ) ], emptyKeyValue );\n    var chaptersObject = new Resolver( new ModuleRequest( '', '', emptyKeyValue, null ), emptyExtra, new JavascriptConfig( false, false, '' ), new Output( videos ) );\n    var finalJson = JSON.stringify( chaptersObject );\n    savedData.innerHTML = finalJson;\n          /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "},"output":{"moduleID":"234234823","video":[{"videoQuality":"720","videoLink":{"url":"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4","method":"get","headers":[{"key":"key","value":"value"}],"httpBody":null}}]},"moduleCreatorIddQYBQrdsjoafXkbzqoGB":{"path":"cHcMK","id":"moduleResolvers,0,resolver,0cell","sectionsHidden":[],"options":{"name":"Request"},"cellsHidden":false,"javascriptEditorScroll":110,"openedMenu":"Javascript"}}],"moduleCreatorIdyxClljcKHDoKwwLfMAXh":{"path":"OZvQL","id":"moduleResolvers,0section","sectionsHidden":[],"options":{"name":"Resolver"},"cellsHidden":false},"moduleCreatorIdDwtRTSakDwhxpXQuWTeu":{"path":"resolver","id":"moduleResolvers,0,resolversection","sectionsHidden":[],"options":{"name":"Resolver Request","listName":"Request"},"cellsHidden":false}},{"resolverInfo":{"resolverName":"VidCloud","nameMatches":["RAPID-CLOUD","RAPID-CLOUD DUB","MEGACLOUD","MEGACLOUD DUB"],"developer":"ナビル","moduleID":"rapidcloud","resolverVersion":1.08,"baseURL":"https://rapid-cloud.ru/","moduleCreatorIdMWafgCAtwrbjviOpbjii":{"path":"FTgwj","id":"moduleResolvers,1,resolverInfosection","sectionsHidden":[],"options":{"name":"Resolver Parameters","listName":"parameters"},"cellsHidden":false},"moduleCreatorIdZTrVLEjfPfbpMOQBbuxz":{"path":"VBvaT","id":"moduleResolvers,1,resolverInfocell","sectionsHidden":[],"options":{"name":"parameters"},"cellsHidden":false}},"resolver":[{"request":{"url":"https://megacloud.blog/embed-2/v3/e-1/IHzY0gENhrpt?k=1","method":"get","headers":[{"key":"referer","value":"https://megacloud.tv/","moduleCreatorHeaderisActive":true},{"key":"","value":"","moduleCreatorHeaderisActive":false}]},"extra":{"commands":[{"commandName":"","params":[{"key":"","value":""}]}],"extraInfo":[{"key":"","value":""}]},"javascriptConfig":{"removeJavascript":false,"loadInWebView":true,"javaScript":"\n        try {\n\n             \n\n        var KETSU_ASYNC = true;\n        \n        /* JAVASCRIPT STARTS */     // SCROLL TO LINE 89 TO START CODING.\n/**\n * @param {ModuleRequest} request\n * @param {Extra} extra   \n * @param {JavascriptConfig} javascriptConfig \n * @param {Output} output  */\n\n\nfunction Resolver(request, extra, javascriptConfig, output) {\n\n    this.request = request\n    this.extra = extra\n    this.javascriptConfig = javascriptConfig\n    this.output = output\n} /** * @param {string} url * @param {string} method   * @param {KeyValue[]} headers  * @param {string} [httpBody]  */\n\nfunction ModuleRequest(url, method, headers, httpBody) {\n\n    this.url = url\n    this.method = method\n    this.headers = headers\n    this.httpBody = httpBody\n} /** * @param {Commands[]} commands * @param {KeyValue[]} extraInfo  */\n\nfunction Extra(commands, extraInfo) {\n\n    this.commands = commands\n    this.extraInfo = extraInfo\n} /** * @param {string} commandName * @param {KeyValue[]} params  */\n\nfunction Commands(commandName, params) {\n\n    this.commandName = commandName\n    this.params = params\n} /** * @param {boolean} removeJavascript * @param {boolean} loadInWebView */\n\nfunction JavascriptConfig(removeJavascript, loadInWebView) {\n\n    this.removeJavascript = removeJavascript\n    this.loadInWebView = loadInWebView\n    this.javaScript = \"\"\n}\n/** * @param {string} key\n * @param {string} value \n */\n\n\nfunction KeyValue(key, value) {\n\n    this.key = key\n    this.value = value\n} /** * @param {ModuleRequest} link * @param {String} language*/\n\nfunction Subtitles(link, language) {\n\n    this.link = link\n    this.language = language\n} /** * @param {Video[]} [video] * @param {Subtitles[]} [subs]*/\n\nfunction Output(video, subs) {\n\n    this.video = video\n    this.subs = subs\n} /** * @param {ModuleRequest} videoLink * @param {String} videoQuality*/\n\nfunction Video(videoQuality, videoLink) {\n\n    this.videoQuality = videoQuality\n    this.videoLink = videoLink\n}\nfunction vttParse(url) {\n  const xhr = new XMLHttpRequest();\n  xhr.open('GET', url, false); // false = synchronous\n  xhr.send(null);\n  \n  if (xhr.status !== 200) {\n    throw new Error(`Failed to fetch VTT: ${xhr.status}`);\n  }\n  \n  // Return data URL with text/vtt MIME type\n  return smartShortenVTTTimestamps(xhr.responseText);\n}\n\n\n/**\n * Alternative version that always removes hours if they are zero\n * and handles both formats (with and without hours already)\n */\nfunction smartShortenVTTTimestamps(vttContent) {\n  // Normalize line endings\n  let content = vttContent.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n  \n  // Remove trailing whitespace but keep structure\n  content = content.trim();\n  \n  // Split into lines for processing\n  const lines = content.split('\\n');\n  \n  const processedLines = lines.map(line => {\n    // Check if line contains timestamp\n    if (line.includes('-->')) {\n      // Extract the two timestamps\n      const parts = line.split('-->').map(p => p.trim());\n      if (parts.length === 2) {\n        const processedParts = parts.map(timestamp => {\n          // Handle timestamps with hours (HH:MM:SS.mmm)\n          if (timestamp.match(/^\\d{2}:\\d{2}:\\d{2}\\.\\d{3}$/)) {\n            const [hours, minutes, seconds] = timestamp.split(':');\n            if (hours === '00') {\n              return `${minutes}:${seconds}`;\n            }\n          }\n          // Return unchanged if doesn't match pattern or hours aren't 00\n          return timestamp;\n        });\n        \n        return `${processedParts[0]} --> ${processedParts[1]}`;\n      }\n    }\n    \n    // Return unchanged if not a timestamp line\n    return line;\n  });\n  \n  // Join lines and ensure EXACTLY ONE newline at end\n  let result = processedLines.join('\\n');\n  \n  // Remove multiple trailing newlines\n  while (result.endsWith('\\n\\n')) {\n    result = result.slice(0, -1);\n  }\n  \n  // Add single newline if missing\n  if (!result.endsWith('\\n')) {\n    result += '\\n';\n  }\n  \n  return result;\n}\n\n /*CODE STARTS HERE: - What you need to do is to create a Resolver Object and save it as a json string on the div with the id: ketsu-final-data, to be more precise the one saved on the variable called savedData below this comment.- Most of the code is already done, you just need to fill the output variable with an Output object.*/\n\n \nvar savedData = document.getElementById('ketsu-final-data')\nvar parsedJson = JSON.parse(savedData.innerHTML)\nvar emptyKeyValue = [new KeyValue('Referer', parsedJson.request.url)]\nlet output = new Output([], [])\n\nwindow.failedRetriving = () => {\n\n    clearInterval(intervalID)\n    window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('')\n}\nlet retries = 10\nlet currentRetry = 0\nlet intervalID = setInterval(() => {\n\n    if (currentRetry > retries) {\n        window.failedRetriving()\n        return\n    }\n\n    window.webkit.messageHandlers.KETSU_LOG.postMessage(window.jwplayer)\n\n    let item = jwplayer().getPlaylist()[0]\n\n    currentRetry += 1\n    console.log(item)\n    if (item == undefined || item.length == 0) {\n        console.log(item)\n        return\n    }\n\n    let subs = item.tracks.filter((track) => track.kind == \"captions\").map((caption) => new Subtitles(new ModuleRequest(vttParse(caption.file),'downloaded',[],undefined),caption.label)) || []\n\nsubs.push(...item.tracks.filter((track) => track.kind == \"captions\").map((caption) => new Subtitles(new ModuleRequest(caption.file,'GET',[],undefined),caption.label + \"-2\")) || [])\n    \n    console.log(subs)\n    output.subs = subs\n\n    item.allSources.forEach((source) => {\n    output.video.push(new Video(source.type,new ModuleRequest(source.file,'GET',[],undefined)))\n})\n\n    let emptyExtra = new Extra([new Commands('', emptyKeyValue)], emptyKeyValue)\n    var chaptersObject = new Resolver(new ModuleRequest('', '', emptyKeyValue, null), emptyExtra, new JavascriptConfig(false, false), output)\n    var finalJson = JSON.stringify(chaptersObject)\n    savedData.innerHTML = finalJson;\n    window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('')\n}, 1000)     /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "},"output":{"moduleID":"","video":[{"videoQuality":"720","videoSubs":[{"language":"","link":""}],"videoLink":{"url":"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4","method":"get","headers":[{"key":"key","value":"value"}],"httpBody":null}}]},"moduleCreatorIdgoIhAoToEslrwnHAaiFa":{"path":"FMRYZ","id":"moduleResolvers,1,resolver,0cell","sectionsHidden":[],"options":{"name":"Request"},"cellsHidden":false,"openedMenu":"Javascript","javascriptEditorScroll":112,"async":true}}],"moduleCreatorIddAGQjePJomIydfOKMKiE":{"path":"deChS","id":"moduleResolvers,1section","sectionsHidden":[],"options":{"name":"Resolver"},"cellsHidden":false},"moduleCreatorIdQkhEiwSCZPVfpiMFqCyG":{"path":"resolver","id":"moduleResolvers,1,resolversection","sectionsHidden":[],"options":{"name":"Resolver Request","listName":"Request"},"cellsHidden":false}}],"responseCodeFunctions":[{"code":0,"msgTitle":"","msgBody":"","type":"normal","functions":[{"request":{"url":"empty","method":"get","headers":[{"key":"key","value":"value","moduleCreatorHeaderisActive":true},{"key":"","value":"","moduleCreatorHeaderisActive":true}]},"extra":{"commands":[{"commandName":"","params":[{"key":"","value":""}]}],"extraInfo":[{"key":"","value":""}]},"javascriptConfig":{"removeJavascript":true,"loadInWebView":false,"javaScript":"\n        try {\n\n            /* JAVASCRIPT STARTS */         \n         /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "},"moduleCreatorIdvDFVLxfXyghHLvscLpdz":{"path":"fRhVY","id":"responseCodeFunctions,0,functions,0cell","sectionsHidden":["moduleCreatorIdvgQopbNlHmQMRtROkUCa"],"options":{"name":"Request"},"cellsHidden":false,"javascriptEditorScroll":2}}],"moduleCreatorIdRJMUxMvWVQrbnOKtMoFr":{"path":"TznBl","id":"responseCodeFunctions,0section","sectionsHidden":["moduleCreatorIdvgQopbNlHmQMRtROkUCa"],"options":{"name":"Function"},"cellsHidden":false},"moduleCreatorIdYokFBafXmbBSZLLsZltl":{"path":"DYWCZ","id":"responseCodeFunctions,0,section","sectionsHidden":["moduleCreatorIdvgQopbNlHmQMRtROkUCa"],"options":{"name":"Function Parameters","listName":"Parameters"},"cellsHidden":false},"moduleCreatorIdhwkGBCMfLMQzpgLJhQHx":{"path":"BFRov","id":"responseCodeFunctions,0,cell","sectionsHidden":["moduleCreatorIdvgQopbNlHmQMRtROkUCa"],"options":{"name":"Parameters"},"cellsHidden":false},"moduleCreatorIdkzHDzNgRihDYYIjXpOAL":{"path":"functions","id":"responseCodeFunctions,0,functionssection","sectionsHidden":["moduleCreatorIdvgQopbNlHmQMRtROkUCa"],"options":{"name":"Function Requests","listName":"Request"},"cellsHidden":false}}],"helperFunctions":[{"functionName":"example","msgTitle":"","msgBody":"","type":"normal","functions":[{"request":{"url":"empty","method":"get","headers":[{"key":"key","value":"value","moduleCreatorHeaderisActive":true},{"key":"","value":"","moduleCreatorHeaderisActive":true}]},"extra":{"commands":[{"commandName":"","params":[{"key":"","value":""}]}],"extraInfo":[{"key":"","value":""}]},"javascriptConfig":{"removeJavascript":true,"loadInWebView":false,"javaScript":"\n        try {\n\n            /* JAVASCRIPT STARTS */ \n /* JAVASCRIPT ENDS */\n\n        } catch (e) {\n            console.error(e.message);\n\n            if (typeof KETSU_ASYNC !== 'undefined') {\n                window.webkit.messageHandlers.EXECUTE_KETSU_ASYNC.postMessage('');\n            }\n\n        }\n        \n        "},"moduleCreatorIdxFTuhGOYAuGcbiSaanIR":{"path":"WsyFa","id":"helperFunctions,0,functions,0cell","sectionsHidden":[],"options":{"name":"Request"},"cellsHidden":false,"javascriptEditorScroll":2}}],"moduleCreatorIdptntGCRvsTvpTFryBNlI":{"path":"fAyzR","id":"helperFunctions,0section","sectionsHidden":[],"options":{"name":"Request"},"cellsHidden":false},"moduleCreatorIdszJpUbsJdibpFGTneXAs":{"path":"OYKiY","id":"helperFunctions,0,section","sectionsHidden":[],"options":{"name":"Function Parameters","listName":"Parameters"},"cellsHidden":false},"moduleCreatorIdCrCcdOvzrhzyjfaoKwkn":{"path":"KJpIu","id":"helperFunctions,0,cell","sectionsHidden":[],"options":{"name":"Parameters"},"cellsHidden":false},"moduleCreatorIdpBbAVSznojReZUHjXNsk":{"path":"functions","id":"helperFunctions,0,functionssection","sectionsHidden":[],"options":{"name":"Function Requests","listName":"Request"},"cellsHidden":false}}],"moduleCreatorGlobalOptions":{"selected":"moduleCreatorIdgoIhAoToEslrwnHAaiFa","notes":{},"hideViews":[],"id":"EoRKhocLaueROPw","projectName":"HiAnime","notesData":{"openedNotes":[],"activeNote":"oFwjzvDpdfxlaKQrGUwc","notes":{}}},"moduleCreatorIdGzPXNgxSFrWKHppRMKWu":{"path":"mainPage","id":"mainPagesection","sectionsHidden":[],"options":{"name":"Main Page","listName":"Request"},"cellsHidden":false},"moduleCreatorIdYdmnknilvifajOEYwucG":{"path":"search","id":"searchsection","sectionsHidden":[],"options":{"name":"Search Page","listName":"Request"},"cellsHidden":false},"moduleCreatorIdNLtjeYlURhmWlZPuaQhI":{"path":"info","id":"infosection","sectionsHidden":[],"options":{"name":"Info Page","listName":"Request"},"cellsHidden":false},"moduleCreatorIdojVvZGmdwSvCLscMuBcF":{"path":"chapters","id":"chapterssection","sectionsHidden":[],"options":{"name":"Chapters","listName":"Request"},"cellsHidden":false},"moduleCreatorIdnVdZtyjiwEicZJfdGMIb":{"path":"moduleResolvers","id":"moduleResolverssection","sectionsHidden":[],"options":{"name":"Resolvers","listName":"Resolver"},"cellsHidden":false},"moduleCreatorIdvgQopbNlHmQMRtROkUCa":{"path":"responseCodeFunctions","id":"responseCodeFunctionssection","sectionsHidden":[],"options":{"name":"Response Code Funtions","listName":"Function"},"cellsHidden":true},"moduleCreatorIdRjzfFiUPHcXeRGMKFrus":{"path":"helperFunctions","id":"helperFunctionssection","sectionsHidden":[],"options":{"name":"Helper Functions","listName":"Request"},"cellsHidden":false}}
